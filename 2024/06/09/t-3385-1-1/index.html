<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提... | Mybbs</title><meta name="keywords" content="教程,MC"><meta name="author" content="Mybbs —— 开源MC社区"><meta name="copyright" content="Mybbs —— 开源MC社区"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提..."><meta name="application-name" content="服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提..."><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提..."><meta property="og:url" content="https://bianb-hehe.github.io/2024/06/09/t-3385-1-1/index.html"><meta property="og:site_name" content="Mybbs"><meta property="og:description" content="原作者：EmptyLava（本文已获得原作者转载授权） 原文地址：https:&amp;#x2F;&amp;#x2F;www.mcbbs.com&amp;#x2F;thread-1082459-1-1.html 镜像地址：https:&amp;#x2F;&amp;#x2F;bbs-archive.github.io&amp;#x2F;thread.html?t&amp;#x3D;1082459 最后更新时间：2021-2"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://ts1.cn.mm.bing.net/th/id/R-C.9a6de07448a467a377b44596d9ae5da0?rik=8WbMsGmKuRB5XA&amp;riu=http%3a%2f%2fpic.2265.com%2fupload%2f2021-8%2f2021810928385817.png&amp;ehk=Xi9L%2fFaaTMGPUxE7TnAHh3CKp6VDRo44YeVHbgK3Auk%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0"><meta property="article:author" content="Mybbs —— 开源MC社区"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://ts1.cn.mm.bing.net/th/id/R-C.9a6de07448a467a377b44596d9ae5da0?rik=8WbMsGmKuRB5XA&amp;riu=http%3a%2f%2fpic.2265.com%2fupload%2f2021-8%2f2021810928385817.png&amp;ehk=Xi9L%2fFaaTMGPUxE7TnAHh3CKp6VDRo44YeVHbgK3Auk%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0"><meta name="description" content="原作者：EmptyLava（本文已获得原作者转载授权） 原文地址：https:&amp;#x2F;&amp;#x2F;www.mcbbs.com&amp;#x2F;thread-1082459-1-1.html 镜像地址：https:&amp;#x2F;&amp;#x2F;bbs-archive.github.io&amp;#x2F;thread.html?t&amp;#x3D;1082459 最后更新时间：2021-2"><link rel="shortcut icon" href="https://img.pixelbbs.cn/LightPicture/2024/05/642ae2f5e0e131a7.ico"><link rel="canonical" href="https://bianb-hehe.github.io/2024/06/09/t-3385-1-1/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":""},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Mybbs —— 开源MC社区","link":"链接: ","source":"来源: Mybbs","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Mybbs',
  title: '服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提...',
  postAI: '',
  pageFillDescription: '相关推荐原作者本文已获得原作者转载授权原文地址镜像地址最后更新时间因不支持上标注释省略了所有上标注释优化了部分文案和格式前言这篇教程的意义目前站内的关于配置文件的优化教程大多都是凭借前人经验与个人感觉而实际的优化效果可能欠佳不但优化效果差还会严重影响玩家体验而本篇教程就是为了在配置文件中找出最有效的配置项以及最佳优化效果时的数值并结合形成整个配置文件你的测试数据怎么让我们信服我们每次测试都会记录下测试数据然后公布在腾讯文档上以后可能会发布在上每一次测试都可以寻找到链接和当时的不可能出现造假的情况同时我们会尽量减小测试的误差测试平台是服务器进程的内存分配为启动参数为服务器版本在测试时会有说明大部分为也有内容服务器种子为防止地图建筑等对测试的影响其他参数如未说明均为默认参数数据采样使用仅一次使用为什么不用你是不是歧视它不好用对就是不好用由于核心为的数据收集至少需要分钟这给测试带来了许多不便在对照条件下根本就没法用随随便便生成的报告都有的肯定是不符实际的我怎么知道它是正确的还是错误的呢当然极少数情况我们也可能会选择我服务器是的看你的这篇教程有用吗对于您可以大胆参考不需要有任何担心对于测试内的是不会变的变的只是和优化效果而优化效果看的是被测事物本身比如我要测服务器内区块和区块的占用情况如何优化效果的多少在和是接近的即使单个区块的占用变了优化效果也不会变化多少并且我们也对的内容进行了测试让数据更加准确其他在鸽了在鸽了具体进度请查看腾讯文档本教程比腾讯文档晚更新结论的表格中的综合提升有一定参考价值在实际生产环境中的提升效果会有一定折扣除非服务器没有插件占用针对提升是针对某些单一方面的看针对提升的效果时请注意这个配置项测的是什么同时针对提升一般反映的是这项配置的最大优化能力请勿把针对提升当做此配置的真实优化水平由于某些原因我不可能会去多次测试取平均值所以测试结果会有一定误差但是误差会在可接受范围内适用服务端所有服务器允许的最大视野距离单位区块数默认低于的数值还会减少刷怪量测试内容玩家移动格的服务器状况有区块回收玩家在出生点时不同数值时的服务器状况附加参数在内并且将区块加载速度设置为实际测试中由于网络问题区块加载速度约块秒仅测试需要还需要设置内的因为优先于仅需要后面的中默认为即根据数值越大越好综合提升针对提升数值越高越好综合提升测试时可能碰到了一个特性在的服务器内区块加载规则是加载玩家周围的个区块数值这个和一般对的解释是吻合的但是在的区块加载数变为了变成了这显然和之前的机制不同个人猜测外围多加载的区块可能是缓冲区跑过去才会接收到区块但是不算新加载的区块这种机制可能是用来降低的波动因此在或更高版本的服务器中要格外注意这一部分额外加载的区块你完全可以比的推荐数值小在时优化效果最佳且玩家体验较好同时在测试的时候发现当设置为时是可以看到视距的说明最低只能是再往低就没有意义了适用服务端等基于的服务端多少执行一次事件的事件是生物的生成是世界保存默认值动物怪物水生动物水下环境生物环境生物这项配置只测试其他数值和大同小异且刷新数量较少不进行测试测试结果不精准同样不测试测试内容不同数值时玩家在出生点以的视野距离挂机秒后的服务器状况不同数值时世界保存的占用不同数值时玩家在出生点以的视野距离挂机秒后的服务器状况附加参数禁用区块回收不限制内的此配置项会限制玩家周围的最大刷怪量因此测试时需取消限制数值越高越好针对提升数值越高越好世界保存占用针对提升数值越高越好针对提升结论在限制后服务器的实体数量在左右不会更高时服务器异常卡顿继续测试可能会崩溃在设置为以上后回升很多但是依然可怕在表格中看似有一点优化效果但这一点点玩家实体情况下降低了的自己服务器可类比的意义太小了还可能导致服务器在意外崩服时回档时间更长建议如果您不对或进行修改内的生物生成配置在玩家不加载区块时修改它可能没什么影响如果玩家有跑图的行为服务器内的刷怪量可能是可怕的区块有实体因此推荐至少设置为如果觉得这三种生物还是刷得多还可以直接设置为与相同数值推荐直接修改为的数值根据服务器情况低于的数值几乎没有意义可选择修改默认值足够高了设置为默认值的倍也可推荐最多设置为分钟超过这个数值会让服务器异常关闭时回档严重而且测试的时候也没有见到提升这个数值能显著减少自动保存占用每个玩家在所在世界中能刷出多少怪物默认猜想与视野距离有关猜想与玩家数有关猜想与加载的区块量有关和很好测试是错的是正确的猜想在测试过程中发现会受到被卸载的区块中实体的干扰而且这一部分实体无法被也不会计入服务器实体的数据中因此在测试中禁止区块回收并使用循环命令将玩家平移格后会到起点并所有实体并重复循环命令移动格结果图片丢失因此在跑图的时候服务器内的实体满足这个公式这个似乎是官方给的海螺也说是这个公式只不过图中的应该为图片丢失结论的解释当已被卸载的区块加载时满足生物内对应数值当前世界区块数当已被卸载的区块加载时满足总实体内各数值之和当前世界区块数此外我们还发现了一个离谱的现象仅或更低版本只要所在区块被或了短期情况也许是几小时也许是永久下实体不可能恢复原样随后经过排除我们发现是内的影响的默认值为导致刷怪量大大减少所以你的服务器刷怪少也许是因为导致的测试内容参数不同时玩家在出生点的时候服务器状况参数不同时玩家在出生点的时候服务器状况附加参数需要在内设置为等同于视野距离的数值否则会影响此参数的效果导致不刷怪测试时的默认值为正常的倍模拟人时的情况该参数的倍率越高越好针对提升该参数的倍率越高越好针对提升当服务器为人左右时将此配置项设置为原来的一半即最多可以降低的实体数量降低为原来的可能会引起玩家的愤怒平均每个人周围只有实体这会导致玩家周围基本不刷怪如果你的服务器内玩家超勇并且你用了较好的设置为原来的倍然后提升的数值也不会影响多少因此推荐您将各数值设置为原来的至原来的推荐的版本降低的更多经测试中区块平均会产生一千多个实体多少回收一次区块默认值即秒修改此项同时也要修改内的或者禁用其中一项两次区块回收之间需要加载多少区块才能进行下一次区块回收默认这两项数值不会影响很多性能这是测试在不同情况下的性能占用耗时在出生点时不加载额外区块区块回收占用匀速移动格后区块回收占用默认值时区块回收占用几乎为实际情况是根本找不到区块回收这一项应该是小于采样时间是不可能没记录到设置为时玩家禁止时候区块回收占用略高移动时虽然区块回收占用有但是加快了服务器内区块回收及时减少了区块回收的数量能挽回区块回收带来的占用亏损甚至还赚了一些但是我们不建议您设置为如此频繁的区块回收在服务器玩家过多区块数量很多时如大于区块回收占用就很可怕了因此建议您设置的数值不要低于适用服务端等以玩家为中心的半径多少区块内可以刷怪默认默认值数值设置大于也不会在区块外刷怪因为原版刷怪机制为生物离玩家最多格否则刷出的怪物将被删除数值低于时服务器内刷怪量低于或远低于正常刷怪量仅或更低版本在或更低版本的服务器上较低的数值会导致刷怪量急剧减少这是因为内的限制了平均一个区块内能生成多少生物而会阻止较远的区块生成怪物两项配置的共同作用使得刷怪数量远低于正常水平测试内容修改内为原来的倍时候服务器内生物刷新的状况附加参数数值越高越好针对提升在或高版本的服务器上的作用类似中的生物生成配置测试时设置为的刷怪速度只有设置为刷怪速度的左右不过不会影响刷怪量不过为了配合推荐将这项数值修改为在以下版本的服务器上会使刷怪量大幅减少将设置为以上每名玩家大约会额外降低至少的服务器线程睡眠占比将设置为还是能见到刷怪但已经很少了如果您真切需要这的占用换算成事件耗时的话最多为这是真实的优化或者您的服务器内玩家很多此项配置可改为但是较低的数值会导致刷怪塔的性能不能被完全榨干如果您想让您的服务器回归原版刷怪机制修改到或也是一个不错选择而且带来的服务器负担也不是很多换算为事件耗时约为以玩家为中心生物距离玩家多少格内才被激活每秒被激活的数量限制默认值在下方已折叠测试内容不同数值时玩家绕只分散的僵尸移动时服务器占用附加参数禁用区块回收将内的设置为否则服务器内的怪物会被缓慢删除影响测试效果数值越高越好针对提升当为默认值一半的时候怪物的耗时降低了一半多但是这个数值对于玩家是几乎无法游玩的看到的怪物大多都没有激活玩家没有游戏体验设置到的时候怪物的占用也有的降幅而等其他配置的优化效果和是一样的可以根据表格内的优化效果修改且动物对于玩家的影响不大改为也没什么关系村民被激活时的寻路占用了大量的貌似仅仅是指幻翼是指掉落物如果你的服务器内有很多生成掉落物的机器如用岩浆块杀死怪物的刷怪塔地毯机机器可以适当降低此项但不能设置为或更低否则会出现实体无法捡起等一系列奇妙的这一项此项还是不动最好的修改意义不大大型服务器可能还要增加这些数值因此如果您的服务器是养老生存服且大型机械非常多玩家又喜欢养动物可以设置为设置为原来的如果您的服务器是服这几项只能微调注意过低的数值会导致刷怪塔效率降低甚至不工作经过测试的数值是指怪物与玩家的水平距离与竖直距离无关在服务器的两个之间实体方块实体最多允许被计算多长时间单位毫秒默认默认数值已经足够了如果你的服务器实体方块实体占用极高降低这两项数值可能会有显著的提升如果实体方块实体占用不高如果设置太低实体方块实体会跳过计算可能会导致玩家体验下降漏斗分类机堵塞之类的测试内容使用核心因为禁用此项在不同数值的情况下只实体的占用以及玩家怪物计算被跳过的情况由于很难达到因此不测试且的规律适用于附加参数禁止生物自然生成使用进行数据收集而不是对于低时的采样效果不好数值实体计算被跳过状况针对提升中等中等最高中等最高严重最高极为严重最高同理针对提升中的最高指的是当服务器内实体方块实体达到占用时即达到了默认值的阈值但是大多数服务器都无法达到这个数值所以您需要使用进行采样输入三分钟后输入然后在输出结果的网页内内找到一项的如果没有修改过您又需要优化您可以将修改为最高时占用大约会带来的实体占用下降如果您修改过且占用就不建议再改了与同理只是的占用每一种占用的总和需要自己计算注意事项此配置项在上不生效已经在找过了没有启用这个配置项的选项在上的数据请看腾讯文档内这好像是官方自己禁用的不支持降低此项可能会给服务器带来不稳定特别是服务器如数据不同步等但是它带来的优化效果真的很可观这就是不支持它的原因你就不应该用它它从源头上破坏了服务器的正常运转导致了服务器的不同步翻译自注是的维护者之一漏斗多少传输一次多少检查一次默认漏斗一次传输几个默认值为此项不影响性能但是会影响效率测试内容个漏斗传输物品时不同数值下这三个数值的倍倍倍倍倍漏斗的占用其他参数禁止生物生成因为测试的时候动用了命令生成怪物来生成掉落物使用核心代表各数值倍率越高越好针对提升传输时传输时传输时传输时传输时不传输时不修改数值时大约每个漏斗会占用的服务器但是多个漏斗叠加的占用还是挺多的一般用到漏斗的大型机器有个差不多就要占用了按照站内一些教程给的推荐数值大概只能降低的漏斗属实没劲即使这个数值设置到全站给过的最高数值也只能降低占用这是因为与不同由于受到的限制不工作的实体占用几乎为而时刻都有一定计算在不工作的情况见表格第六行也有一定的占用同时修改了和后物品每次传输间隔时间和数量都修改了许多和漏斗有关的机器都可能出现如抽奖机分拣机大于可能还会导致物品复制的小为了减少或防止这种不同步数值最好要是的倍数因此对于生存服如果服务器内的漏斗很多那还是建议设置为也占用了一定性能所以多提升了一些如果漏斗占用不高只建议更改对于服且又需要漏斗的可以考虑直接改为这样漏斗传输速度很快传输时间变短占用会下降很多对于服修改为即可每个最多计算多少个默认测试内容不同数值时余个爆炸时服务器的状况以及的占用不同数值时余个爆炸时服务器的状况以及的占用附加参数数值越高越好占用针对提升数值越高越好占用针对提升在为默认值时爆破余个时降低较多仅能保持但是的处理速度很快秒不到的样子在设置到后能明显看见了计算滞后处理很慢同时实体积压秒后还有多个实体已被点燃的待处理设置为和时的爆炸处理明显缓慢周围甚至出现了没有被激活的情况到最后还有一部分没有被引爆这样会导致许多需要的大型机器威力下降甚至炸膛少量复制机器不受影响这也明显减弱了熊孩子放置大量的威力对于任何服务器设置为即可也可设置为高于这个数值的优化效果较差低于这个数值会导致计算滞后对于一些正在用清理区块的服务器可以临时恢复为适用服务端每个世界中每最多生成多少区块默认每个世界中保存地图时每最多保存多少区块默认每个世界中每最多发送多少区块默认注生成发送生成这里指的是从未被加载过的区块发送指的是已经加载过的区块这三个配置项放在一起的原因它们的功能都相似它们对于服务器的优化效果不是很明显除非服务器玩家跑的比香港记者还快网速感人但是这三项数值对于提升服务器的稳定性可以让更平滑减少跑图世界保存带来的突发降低测试内容不同数值时倍移动速度平稳加载新区块时服务器和占用附加参数由于优化效果很小且这个数值不会影响性能所以没放入测试主要是测不出强行测的话误差大数值越高越好占用针对提升默认值虽然看着提升很大但实际肯定不能这样用测试的时候是飞行倍速速度为那么每秒可以移动个区块同时视野距离为那么玩家每移动一个区块就会加载区块不考虑斜向这样的话每秒就会加载个区块不考虑网络的情况下实际上网络没满都设置为时有的区块被跳过加载了正常的玩家疾跑速度是换算下来在视野距离时每秒需要加载个区块如果是的区块区块只能加载到最大值的加载折扣肯定让玩家无法接受因此推荐平均每个玩家只能加载到最大值的也就是区块每秒对应的就是当然可以更低如这是一个世界性选项作用在整个世界上而一个世界又有很多玩家我测试的时候是独自一人的所以最终数值要乘以服务器玩家玩家加入的时候会满速加载区块大概秒就要加载区块为了防止这样的突发事件还要增加数值综上所述的设置公式数值玩家疾跑时的速度默认如果你的服务器玩家普遍加速这个数值还要上升服务器内玩家最多的那个世界的平均活跃人数需要减去挂机人数这一部分人不加载区块只要不是核心跑图玩家就都建议去掉最终数值一定要取整取上取下自由选择同时可以适当降低如某世界平均活跃玩家为的服务器玩家各个拿着移速的屠龙宝刀数值就应该设置为取整后为这样每秒最多加载格区块平均每个玩家分到区块名玩家正在进入服务器时每名玩家也能分到区块既能保证玩家不流失体验又可以略降服务器占用如果服务器玩家频繁进出效果会更好是否开启默认是一个服务器分析工具虽然很轻量但仍然会有一定占用服务器不会每时每刻都用测试内容在服务器的不同占用情况下即每秒数不同时与的总占用附加参数在第个测试中和都为耗时是否启用实体数越高越好的占用综合提升怪物全部被激活怪物全部被激活即使打开大约也只会占用的服务器如果关闭此项则可以降低因为开始的事件依然存在不会消失这的服务器占用可以化作的提升降低这一点提升完全可以不在意但是如果你的服务器内安装了一些可以代替的插件例如那么你完全可以选择关闭这一项选择如果你偶尔需要使用又没有替代插件我还是推荐保留了如果你没用过哦那没事了直接关掉吧不用想是否启用反透视默认这里不讨论其他配置因为不会影响性能注意测试的时候也是默认值似乎是没有用的但设置为时可以生效反透视的原理是服务器修改数据包让服务器发给玩家的关于区块数据的数据包中都充满假矿玩家收到数据包后自己看不见的区域都会变成假矿如果玩家正在用一些作弊透视矿物他看到的将都是假矿测试内容开启和关闭反透视的两种情况下服务器的占比和绝大部分为数据包交换的占用并多次测试求平均值附加参数前面说过了的耗时这里只给了求平均值后的结果没给原值是否启用平均值越高越好平均值越低越好综合提升针对提升是默认值否如果关闭此项也许可以给服务器带来的提升虽然各测次但还是有误差有可能这是误差原因同时也也可以降低每个玩家左右的占用如果服务器玩家多了不开启这一项也能有一点效果如果服务器是生存服有需要反矿透我建议直接打开因为没有哪个反矿透插件占用比这个配置还低了如果是很多人的商业性质服开启它有什么意义呢笑还不如关掉优化一下给玩家更好的体验生物离玩家多远将会被删除是缓慢地依次删除随溢出实体数量增加而变快是直接删除默认值这里的不能比高否则高出部分没有意义而且不建议比内低否则可能怪物对你有仇恨却突然没了这项数值会尽量保证服务器内的实体回到内限制的范围以下除非实体不能再被删除了测试内容新生成的僵尸服务器内限制生物数量且生物已经饱和的情况下不同数值下服务器的状况没有动因为会改变实体机制附加参数无耗时数值越高越好针对提升在降低到后实体减少了左右最多可以降低的实体设置到后实体相比时多了至少但是真有这么大的变化效果实际会比这个小因为在服务器中玩家如果不加载区块通常实体是不会多于限制的只会有一些刷怪笼或者非自然生成的生物超过这个限制而的目的就是删除这些非自然生成的生物当玩家跑图时由于加载了新的区块实体会明显超过限制的意义就不是很大了此时才更有用处但对于服务器内一些实体的机制有影响同时会减少刷怪服务器内刷怪距离为比如设置到时随机刷新的怪物离玩家距离为将被直接删除相当于本次实体刷新尝试失败因此不建议设置到以下如果你的服务器玩家经常跑图但是总体实体不是很多可以适当下降比如降低到如果你的服务器内实体特别多而且你降低过的可以将设置和前面那个数值接近的水平也可以下降到如果你的服务器玩家都很肝且他们抱怨某些实体总是会消失那么完全可以设置为是否开启对于爆炸的优化死亡的实体会被立即清除等从而减少爆炸占用默认开启后爆炸时的实体将被缓存而不是重复计算或更高的版本开启此项可能效果不明显测试内容不同数量爆炸时的占用和睡眠的占比不同数量爆炸时的占用和睡眠的占比附加参数无耗时数量采样时间是否开启该配置项越高越好的占用针对提升同比否否否否是是是是耗时数量采样时间是否开启该配置项越高越好占用针对提升开启此项后的占用同比下降了同时有一定幅度的提升开启此项后在禁止爆炸的生存服内几乎没有优化效果在允许爆炸的生存服内如果使正在使用盾构机等大型机器会有显著的优化效果平常的时候没有在一些使用爆炸效果多的服务器中开启这一项可以来带稳定的爆炸占用下降并且建议所有服务器都打开此项因为没有副作用是否禁用漏斗的事件禁用后可以降低漏斗占用但领地插件等可能无法记录或保护漏斗物品注意这个选项上方还有一个高版本已被移除可能可以对漏斗进行优化但有重大详情见因此在后期版本删除了此项本贴也不对进行测试测试内容当漏斗传输和不传输时分别启用和禁用事件时漏斗的占用附加参数无耗时配置项数值漏斗是否正在传输越高越好漏斗占用针对提升是是否否将此项配置设置为后即禁用事件漏斗的占用下降了但是此项配置不能在以插件玩法为中心的生存服中开启通常安装了领地插件等会导致漏斗不被保护只能在以原版内容为中心的生存服中开启因此启用此项前请三思考虑是否要对漏斗事件进行监听是否启用的红石优化算法启用后对于红石的优化巨大仅可用默认注由于在大改红石机制原算法的作者还没有更新适配的新算法因此这一项在被移除了测试内容启用这项后对于红石计算的优化效果附加参数以后高版本除特殊情况外默认因为性能差异问题会影响结果配置项数值测试次数越高越好机械运动的占用包括红石综合提升启用后对于红石的优化可以达到活塞一类的优化很小总体能达到的优化效果强烈建议服务器都开启这一项除非启用后红石机器出现问题出生点加载区块的范围加载区块数数值默认值是否加载出生点区块默认值和的区别前者会加载出生点的区块后者不会加载出生点区块除非玩家加入服务器并加载了区块并且的部分是无法被卸载的另外在年月日之前构建的在玩家加载出生点前出生点区块不会被加载请悉知论核心更新的重要性测试内容无玩家进入时不同数值的能减少多少的占用无玩家进入时不同数值的能减少多少的占用附加参数无耗时数值越高越好综合提升测试时直接关闭加载了实际区块耗时数值越高越好综合提升测试时直接关闭加载了实际区块关闭或设置为后服务器内的至少下降了要看主城周围的实体方块实体多不多多的话这个优化效果会更好如果服务器玩家经常蜗居在出生点可能效果会变差一些如果关闭这一项对服务器的优化可能是显著的出生点实体多的情况下但是这可能会导致生存服中出生点的机器无法循环工作如刷沙机这样就要多点人了或者插件小概率出现无法用命令传送到别的世界失败的问题所以不建议把设置为但是可以把设置为至少加载区块防止的如果需要常加载的生存服可以选择把这一项设置为或可用每个最多能执行多少次区块的任务默认官方称降低此项数值可能对区块渲染和区块生成有帮助但在实际测试中无论设置为多少数值都无法看见因这项配置带来的区块渲染生成速度变化也没有减少实际占用我目前也不推荐降低此项数值以进行优化适用服务端注文件在服务端目录中这是最主要的配置文档测试时服务端核心是由于本配置文件的配置项较多还会写出配置项所在第行另外中有大量内容与重合这一部分将不会进行测试第行设置为后所有未加载区块内的请求都会被拒绝它可以提升一定性能但它是实验性设置默认值启用它可能会导致一些问题如果这些问题出现了并确定是该项配置导致的可以根据严重程度考虑关闭它测试内容玩家不移动和玩家跑图时开启关闭此项时的服务器状况附加参数是否跑图越高越好提升综合提升否否是是启用此项后有显著的性能提升并且在能提升接近但是测试时次启动中有一次崩溃了看上去是区块生成的时候导致卡线程可能和这个配置项有关但我还是建议你启用此项配置文件中建议也比较中肯只是说出现问题后才建议关闭第行使用的红石算法以提升性能默认值这项配置在服中可能效果不好服谁用红石啊但是如果你是用并且是生存服那么这一项的优化效果绝对是显著的测试内容不同红石数量不断更新并更新周围方块时开启关闭此项配置时红石更新的占用和服务器状况附加参数这次使用了稳定性更好同时数据更精确配置测试次数越高越好周围方块更新的占用针对提升开启此项后仅关于红石周围的方块更新优化就达到了左右整体的红石占用也能降低左右而且测试时发现开启此项后红石更新更加流畅了并不会损失特性对于这种副作用小的选项我是建议一定要启用的如果出现了大型机器失效后可以尝试关闭此项也修复了一些原版的机器失效时也要注意这些第行是否启用的红石优化算法同样可以提升性能默认值决定这个算法是否启用决定了是否使用原版的红石能量等级计算默认值即为使用优化算法决定是否使用原版的方块更新机制默认值即为使用优化算法测试内容启用这项后对于红石计算的优化效果子配置项内两个选项对于红石计算的优化效果附加参数还是用啦是否启用测试次数越高越好针对提升工作的红石优化算法越高越好针对提升都不工作即完全使用原版启用此项后优化效果与之前的差不多可能还会略差一些红石周围的方块更新优化也能达到左右整体的红石占用也能降低左右但是这一项配置可以单独设置启用给的部分比如使用优化算法会导致某机器无法使用这样的话你可以设置为使用原版红石能量更新使用原版方块更新能保留另一个同时又有一定的优化效果同默认值但是中此项修改通常不会影响刷怪上限修改数值有微弱的实体占用变化对实体优化不会超过不过会降低刷怪速度由于优化效果几乎很小所以不测试总结以下根据结果总结了中的所有配置项如果你需要自己对配置进行修改可以查看下面的内容如果你只需要一个能优化的文件直接拉到最下面白嫖配置文件即可优化效果极好好较好一般较差差极差特别差极好在任何情况下都能让占用至少减半提升巨大好在多数情况下都能减少以上的占用提升很大较好一般情况下都能减少客观的占用提升一定的一般优化效果不是特别好在特定情况下才有明显优化较差看不到明显的优化效果在特定情况下才有较小优化差几乎看不到优化效果在特定情况下才有较小的优化极差用都很难看出优化效果跟不用说实际情况了特别差挂名配置文件改了也更没改差不多副作用无极小小中等较大大极大无副作用为零极小副作用几乎不用考虑根本不会影响游玩体验小副作用小在一些特定情况会影响游玩体验中等有一定的副作用偶尔会影响游玩体验较大时常会影响游玩体验玩家可能会发现显著的区别大常常会影响游玩体验玩家会发现显著的区别并抱怨极大严重影响游玩体验玩家会发现显著区别且有时无法游玩下去例如变成了回合制游戏分界线上方是已经测试过的内容同时有中等或更好的优化效果分界线下方是未测试过的内容这些配置项绝大多数优化效果都特别小注由于帖内宽度的问题有一部分配置项没有写完全对于实体有项配置项可以进行优化其中项优化效果较好配置文件配置项优化效果副作用较好中等好小好极小较大一般极小较好小一般无较好除外较大较好小较好极小一般中等一般中等极差无差无特别差无差极小极差极小差极小较差中等较差较小对于方块实体有项配置项可以优化此项优化效果较好配置文件配置项优化效果副作用好除外中等对于红石有项配置项可以优化这项优化效果较好配置文件配置项优化效果副作用极好小极好小极好小注内和内为同一个算法对于区块有项配置可以优化其中项优化效果较好配置文件配置项优化效果副作用极好中等一般无较好较大较好较大一般极小一般极小一般极小较好一般较差极小差中等较差极小一般较小对于漏斗有项配置可以优化这项优化效果较好配置文件配置项优化效果副作用一般较小较好极小一般较小较好较大关于其他类型的优化有项配置可以优化配置文件配置项优化效果副作用较差极小更改配置文件虽然能大幅提升性能但它不是万能的如果你需要对服务器进行更好的优化请打开折叠部分首先需要知道服务器内什么东西会进行大致区块实体不包括玩家方块实体玩家插件占用占用配置文件通常只能对区块实体方块实体进行优化而玩家和数据包传输这两个部分是几乎不能优化的但是可以通过其他方式减少它们的占用玩家的话可以考虑开服设置几个子服对玩家进行分流并同步数据这样既能减少玩家占用也能减少一定的区块实体方块实体占用的事件占用几乎无法减少但是插件的事件占用可以通过更换轻量插件减少不必要的粒子或从而大幅减少它们的占用比如插件抽奖时的跑马灯式你完全可以不用它而用其他抽奖插件再比如插件当怪物的粒子效果较多时服务器会严重卡顿你当然可以减少粒子效果从而降低插件的占用查看数据包和玩家的占用可以通过或者玩家数据包传输主要是插件和不同版本可能有差异如果搜不到可以只搜索玩家都有数据包传输貌似仅有的插件事件占用会单独显示找到关键字后展开内容可以通过看包名就是这一串找到是什么东西的事件里面已经给出的事件的来源不一定需要你全部看懂只要你知道大致是什么事件来源是谁即可找到了占用较高如果只是一点点占用就不用管了的插件再按照之前黑体字给的方法即可更多如果本贴有格式语法问题或者你希望我搬运更多教程文章欢迎联系我搬运催更问题反馈快速响应问卷或在下方留下评论赞铁粒相关推荐服务器插件服务器插件服务器插件服务器插件服务器插件服务器插件服务器插件',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-09 11:11:28',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="msvalidate.01" content="9425B9ADD6D9B15FB7E7E42C9DF4F63A" /><meta name="generator" content="Hexo 7.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Mybbs" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://www.kuaidaili.com/img/loading.gif"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Mybbs</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 本站</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 首页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/4238948.html"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 帮助</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&amp;k=AVD1Y5VnrY8z603_1dFsQrHfY1Uodp1O&amp;authKey=bX2RSjVq%2BYvjD2fsZ3PpEz4r2UAeV0e4lMLr4gTi7agxGPNsEfOP2M%2F%2Bw7i1mryp&amp;noverify=0&amp;group_code=565126072"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 交流群</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 帖子</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 帖子</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 板块</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/index1.html"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 发帖子</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 更多</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/HTML/tc.html"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 图床</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.pixelbbs.cn/source/plugin/bphp_clouds/upload/4438/20240601/417cb596663d3d5bf57708af2fa16eba.zip"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 源码</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/30588.html"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 导航站</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/HTML/index2.html"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 服务器</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/gl.html"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 个人中心</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 小游戏</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/HTML/tcs.html"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 2048</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/tcc.html"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 贪吃蛇</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/CSDN/" style="font-size: 1.05rem;">CSDN<sup>1</sup></a><a href="/tags/MC/" style="font-size: 1.05rem;">MC<sup>36</sup></a><a href="/tags/Mod/" style="font-size: 1.05rem;">Mod<sup>1</sup></a><a href="/tags/blog/" style="font-size: 1.05rem;">blog<sup>1</sup></a><a href="/tags/github/" style="font-size: 1.05rem;">github<sup>29</sup></a><a href="/tags/hexo/" style="font-size: 1.05rem;">hexo<sup>4</sup></a><a href="/tags/hexo%E4%B8%BB%E9%A2%98/" style="font-size: 1.05rem;">hexo主题<sup>9</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>1</sup></a><a href="/tags/paper/" style="font-size: 1.05rem;">paper<sup>1</sup></a><a href="/tags/%E4%BC%91%E9%97%B2/" style="font-size: 1.05rem;">休闲<sup>1</sup></a><a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 1.05rem;">分享<sup>5</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">工具<sup>4</sup></a><a href="/tags/%E6%89%98%E7%AE%A1/" style="font-size: 1.05rem;">托管<sup>1</sup></a><a href="/tags/%E6%8C%87%E4%BB%A4/" style="font-size: 1.05rem;">指令<sup>2</sup></a><a href="/tags/%E6%8E%A8%E8%8D%90/" style="font-size: 1.05rem;">推荐<sup>1</sup></a><a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size: 1.05rem;">插件<sup>11</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">教程<sup>20</sup></a><a href="/tags/%E6%95%B4%E5%90%88%E5%8C%85/" style="font-size: 1.05rem;">整合包<sup>4</sup></a><a href="/tags/%E6%96%B0%E9%97%BB/" style="font-size: 1.05rem;">新闻<sup>2</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.05rem;">服务器<sup>2</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/" style="font-size: 1.05rem;">服务端<sup>1</sup></a><a href="/tags/%E7%B2%BE%E5%93%81/" style="font-size: 1.05rem;">精品<sup>3</sup></a><a href="/tags/%E8%8C%B6%E9%A6%86/" style="font-size: 1.05rem;">茶馆<sup>6</sup></a><a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 1.05rem;">视频<sup>1</sup></a><a href="/tags/%E8%BD%AC%E8%BD%BD/" style="font-size: 1.05rem;">转载<sup>11</sup></a><a href="/tags/%E9%97%AE%E7%AD%94/" style="font-size: 1.05rem;">问答<sup>5</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2026/05/"><span class="card-archive-list-date">五月 2026</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">19</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">26</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/" itemprop="url">教程</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>教程</span></a><a class="article-meta__tags" href="/tags/MC/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>MC</span></a></span></div></div><h1 class="post-title" itemprop="name headline">服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提...</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-06-09T03:01:41.351Z" title="发表于 2024-06-09 11:01:41">2024-06-09</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-06-09T03:11:28.953Z" title="更新于 2024-06-09 11:11:28">2024-06-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://bianb-hehe.github.io/2024/06/09/t-3385-1-1/"><header><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/" itemprop="url">教程</a><a href="/tags/%E6%95%99%E7%A8%8B/" tabindex="-1" itemprop="url">教程</a><a href="/tags/MC/" tabindex="-1" itemprop="url">MC</a><h1 id="CrawlerTitle" itemprop="name headline">服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提...</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Mybbs —— 开源MC社区</span><time itemprop="dateCreated datePublished" datetime="2024-06-09T03:01:41.351Z" title="发表于 2024-06-09 11:01:41">2024-06-09</time><time itemprop="dateCreated datePublished" datetime="2024-06-09T03:11:28.953Z" title="更新于 2024-06-09 11:11:28">2024-06-09</time></header><ul>
<li>原作者：EmptyLava（本文已获得原作者转载授权）</li>
<li>原文地址：<a target="_blank" rel="noopener" href="https://www.mcbbs.com/thread-1082459-1-1.html">https://www.mcbbs.com/thread-1082459-1-1.html</a></li>
<li>镜像地址：<a target="_blank" rel="noopener" href="https://bbs-archive.github.io/thread.html?t=1082459">https://bbs-archive.github.io/thread.html?t=1082459</a></li>
<li>最后更新时间：2021-2-19</li>
</ul>
<blockquote>
<p>@Cnzw<br>因XF不支持上标注释（tooltip）省略了所有上标注释。<br>优化了部分文案和格式。</p>
</blockquote>
<p><strong>前言</strong></p>
<ul>
<li><strong>这篇教程的意义？</strong><br>目前站内的100%关于配置文件的优化教程，大多都是凭借前人经验与个人感觉，而实际的优化效果可能欠佳，不但优化效果差，还会严重影响玩家体验。而本篇教程就是为了在配置文件中找出最有效的配置项，以及最佳优化效果时的数值，并结合形成整个配置文件。</li>
<li><strong>你的测试数据怎么让我们信服？</strong><br>我们每次测试都会记录下测试数据，然后公布在<a target="_blank" rel="noopener" href="https://docs.qq.com/sheet/DWlp3Sk9pUnR2dHJM">腾讯文档</a>上(以后可能会发布在pastebin上)，每一次测试都可以寻找到spark链接和当时的TPS/Chunks/Entities/Tiles，不可能出现造假的情况，同时我们会尽量减小测试的误差。</li>
<li><strong>测试平台是?</strong><br>Windows Server 2016 / Intel Xeon E5 2689 2 Cores / 6GB<br>服务器进程的内存分配为4000M<br>启动参数为 java -jar -Xmx4000M -Xms4000M server-1618.jar<br>服务器版本在测试时会有说明，大部分为1.12/1.13，也有1.13/1.14内容 服务器种子为114514(防止地图建筑等对 测试的影响)<br>其他参数如未说明，均为默认参数<br>数据采样使用<a target="_blank" rel="noopener" href="https://bbs-archive.github.io/thread.html?t=823209">Spark</a>，仅一次使用Timings</li>
<li><strong>为什么不用Timings?你是不是歧视它不好用?</strong><br>对，就是不好用<br>①由于核心为Paper，Timings的数据收集至少需要3分钟，这给测试带来了许多不便<br>②Timings在对照条件下根本就没！法！用！随随便便生成的Timings报告都有400%的tick，肯定是不符实际的，我怎么知道它是正确的还是错误的呢<br>当然，极少数情况我们也可能会选择Timings</li>
<li><strong>我服务器是1.7.10/1.13+的，看你的这篇教程有用吗？</strong><br>对于1.7.10，您可以大胆参考，不需要有任何担心<br>对于1.13+，测试内的Chunks/Entities/Tiles是不会变的，变的只是TPS和优化效果，而优化效果看的是被测事物本身，比如我要测服务器内100区块和200区块的占用情况如何，优化效果的多少在1.12和1.13+是接近的，即使单个区块的占用变了，优化效果也不会变化多少。并且我们也对1.13+的内容进行了测试，让数据更加准确。</li>
<li><strong>其他</strong><br>在鸽(zuo)了在鸽(zuo)了，具体进度请查看腾讯文档，本教程比腾讯文档晚更新<br>结论的表格中的”综合提升”有一定参考价值，在实际生产环境中的提升效果会有一定折扣(除非服务器没有插件占用)，’针对提升’是针对某些单一方面的(看针对提升的效果时，请注意这个配置项测的是什么)，同时针对提升一般反映的是这项配置的最大优化能力，请勿把针对提升当做此配置的真实优化水平!</li>
</ul>
<p>由于某些原因，我不可能会去多次测试取平均值，所以测试结果会有一定误差(但是误差会在可接受范围内)</p>
<p><strong>Server.properties</strong></p>
<p>适用服务端：所有</p>
<ol>
<li>View-distance</li>
</ol>
<p>(Test ID:2-7) (服务器允许的最大视野距离，单位:区块数，默认=10，低于9的数值还会减少刷怪量)</p>
<p>测试内容:</p>
<p>①玩家移动800格的服务器状况(有区块回收)<br><em>[1.12]</em></p>
<p>①玩家在出生点时，不同数值时的服务器状况<br><em>[1.15]</em></p>
<p>附加参数:</p>
<p>①在bukkit.yml/paper.yml内，并且将区块加载速度设置为1000000(实际测试中，由于网络问题，区块加载速度约50~85块/秒)<br><em>[仅测试①需要]</em></p>
<p>②还需要设置spigot.yml内的view-distance，因为spigot.yml优先于server.properties<br><em>[仅1.13-需要，后面的spigot.yml中view-distance默认为default，即根据server.properties]</em></p>
<p>①:<br>View-distance数值Thread.sleep(越大越好)TPS/Chunks/Entities/Tilesdoticktickentity综合提升|针对提升1091.68%19.98/1491/296/262.82%2.26% ——892.55%19.97/952/257/142.33%2.25% 10.50%|17.58%693.62%19.97/913/265/111.87%1.64% 23.31%|23.84%494.72%19.97/703/233/111.11%1.34% 36.50%|36.78%394.32%19.95/611/116/81.25%1.32% 31.70%|46.00%<br>②:<br>View-distance数值SleepForTick(越高越好)TPS/Chunks/Entities/Tiles/mspttickentityChunkProviderTick综合提升878.02%20.00/529/111/16/7.89.23%7.34%—683.38%20.00/289/111/11/5.88.52%3.10%25.02%487.76%20.00/169/105/7/5.76.77%1.48%35.62%386.04%20.00/121/111/5/5.68.34%1.40%37.85%1279.93%20.00/841/149/19/8.58.20%8.33%-8.83%1676.24%20.00/1369/252/28/10.68.88%10.50%-21.99%<br><strong>测试时可能碰到了一个特性:<br> 在1.13-的服务器内区块加载规则是加载玩家周围的[(2n+1)^2]个区块(n=view-distance数值)，这个和一般对view-distance的解释是吻合的。但是在1.14的区块加载数变为了[(2n+3)^2]，1.15变成了[(2n+5)]^2。<br> 这显然和之前的机制不同，个人猜测外围多加载的区块可能是”缓冲区”，跑过去才会接收到区块，但是不算新加载的区块，这种机制可能是用来降低TPS的波动。因此在1.14或更高版本的服务器中要格外注意这一部分额外加载的区块，你完全可以比1.12的推荐数值小1<del>2。<br> 在view-distance=3</del>5时，优化效果最佳且玩家体验较好。<br> 同时在测试的时候发现，当view-distance设置为2时，是可以看到3视距的，说明最低只能是3，再往低就没有意义了。</strong></p>
<p><strong>Bukkit.yml</strong></p>
<p>适用服务端：Bukkit，CraftBukkit，Spigot，Mohist，Paper，Catserver等基于Bukkit的服务端</p>
<ol>
<li>ticks-per</li>
</ol>
<p>(Test ID:15-19|126-130)(多少tick执行一次事件，spawn的事件是生物的生成；autosave是世界保存，默认值animal-spawns<br><em>[动物]</em></p>
<p>=400 monster-spawns<br><em>[怪物]</em></p>
<p>=1 water-animal-spawns<br><em>[水生动物/1.16+]</em></p>
<p>=1 water-ambient-spawns<br><em>[水下环境生物/1.15+]</em></p>
<p>=1 ambient-spawns<br><em>[环境生物/1.15+]</em></p>
<p>=1 autosave=6000)</p>
<p>这项配置只测试ticks.per-monster-spawns，其他数值和monster-spawn大同小异，且刷新数量较少，不进行测试。autosave测试结果不精准，同样不测试</p>
<p>测试内容:</p>
<p>①不同ticks-per.monster-spawns数值时，玩家在出生点以16的视野距离挂机60秒后的服务器状况<br><em>[1.12]</em></p>
<p>②不同ticks-per.autosave数值时，世界保存的占用<br><em>[1.12]</em></p>
<p>①不同ticks-per.water/amibient-spawns数值时，玩家在出生点以8的视野距离挂机60秒后的服务器状况<br><em>[1.15]</em></p>
<p>附加参数:</p>
<p>①禁用区块回收</p>
<p>②View-distance=16</p>
<p>③不限制bukkit.yml内的spawn-limits(此配置项会限制玩家周围的最大刷怪量，因此测试时需取消限制)</p>
<p>①:<br>Monster-spawns数值Thread.sleep(越高越好)TPS/Chunks/Entities/Tilesdoticktickentity针对提升126.85%15.90/1089/5110/115.10%61.91%—373.92%19.59/1223/1785/113.32%17.98%23.70%576.73%20.00/1089/1248/114.45%14.34%25.61%1083.38%19.87/1089/605/113.69%8.69%28.99%3088.15%19.90/1089/247/113.61%4.86%30.71%<br>②:<br>ticks-per.autosave数值Thread.sleep(越高越好)TPS/Chunks/Entities/Tiles世界保存占用针对提升6000(default)92.04%19.97/1089/66/130.69%—1200092.62%19.96/1089/63/130.46%33.33%2400093.02%19.96/1089/63/130.47%31.99%240092.97%19.85/1089/65/130.62%10.15%60093.74%19.98/1089/66/130.55%20.29%<br>③:<br>water/ambient-spawns数值SleepForTick(越高越好)TPS/Chunks/Entities/Tiles/mspttickentity针对提升10.00%11.71/529/2588/16/82.677.56%—351.29%20.00/529/1103/16/30.835.39%20.90%562.93%20.00/529/537/16/22.825.60%24.13%1079.16%20.00/529/365/16/14.312.83%27.56%3089.63%20.00/529/125/16/7.73.09%30.22%</p>
<p><strong>结论<br> 在限制spawn-limits.monsters后，服务器的实体数量在300<del>500左右，不会更高。monster-spawns=1时服务器异常卡顿，继续测试可能会崩溃，在设置为3以上后，TPS回升很多，但是entities依然可怕。<br>ticks-per.autosave在表格中看似有一点优化效果，但这一点点(1玩家+1300chunks+200实体情况下降低了0.2%的tick，自己服务器可类比)的意义太小了，还可能导致服务器在意外崩服时回档时间更长。<br> 建议<br> 如果您不对bukkit.yml–spawn-limits或spigot.yml–mob-spawn-range进行修改，ticks-per内的生物生成配置在玩家不加载区块时，修改它可能没什么影响。如果玩家有跑图的行为，服务器内的刷怪量可能是可怕的(1000区块有1500实体+)，因此推荐water-animal-spawns[1.16+]，water-ambient-spawns[1.15+]。ambient-spawns[1.15+]至少设置为40/80，如果觉得这三种生物还是刷得多，还可以直接设置为与animal-spawns相同数值。monster-spawns推荐直接修改为10</del>200的数值(根据服务器情况，低于5的数值几乎没有意义)。animal-spawns可选择修改，默认值足够高了，设置为默认值的2~3倍也可。<br>ticks-per.autosave推荐最多设置为12000(10分钟)，超过这个数值会让服务器异常关闭时回档严重，而且测试的时候也没有见到提升这个数值能显著减少自动保存占用。</strong></p>
<ol start="2">
<li>spawn-limits</li>
</ol>
<p>(Test ID:20-24|144-148)(每个玩家在所在世界中能刷出多少怪物，默认:monsters:70 animals:15<br><em>[1.12-]</em></p>
<p>/10<br><em>[1.13+]</em></p>
<p>water-animals:5<br><em>[1.12-]</em></p>
<p>/10<br><em>[1.13+]</em></p>
<p>ambient:15 water-ambient<br><em>[1.16+]</em></p>
<p>=20)</p>
<p><del>猜想①:与视野距离有关</del><br>猜想②:与玩家数有关<br>猜想③:与加载的区块量有关</p>
<p>①和②很好测试，①是错的，②是正确的，<br>猜想③在测试过程中发现会受到被卸载的区块中实体的干扰，而且这一部分实体无法被kill，也不会计入服务器实体的数据中。因此在测试中，禁止区块回收并使用循环命令/tp @p[score_move_min=1] ~ ~ ~-1 将玩家平移2000格后，会到起点并kill所有实体，并重复循环命令移动2000格。<br>结果:<br>【图片丢失】<br>因此，在跑图的时候,服务器内的实体满足这个公式(这个似乎是bukkit官方给的，海螺也说是这个公式,只不过图中的256[16<em>16]应该为289[17</em>17])<br>【图片丢失】</p>
<p>结论(spawn-limits的解释):<br>①当已被卸载的区块加载时，满足 生物≤spawn-limits内对应数值*(当前世界区块数/289)<br>②当已被卸载的区块加载时，满足 总实体≤spawn-limits内各数值之和*(当前世界区块数/289)</p>
<p><strong>此外我们还发现了一个离谱的现象</strong><em>[仅1.13或更低版本]</em> <strong>:</strong><br>只要所在区块被kill @e或killall了，短期情况(也许是几小时，也许….是永久)下实体不可能恢复原样，随后经过排除，我们发现是spigot.yml内的mob-spawn-range影响的，默认值为4，导致刷怪量大大减少<br>所以，你的服务器刷怪少也许是因为mob-spawn-range导致的</p>
<p>测试内容:</p>
<p>①:参数不同时玩家在出生点的时候服务器状况<br><em>[1.12]</em></p>
<p>②:参数不同时玩家在出生点的时候服务器状况<br><em>[1.15]</em></p>
<p>附加参数:</p>
<p>①View-distance=16</p>
<p>②需要在spigot.yml内设置mob-spawn-range为等同于视野距离的数值，否则会影响此参数的效果导致不刷怪</p>
<p>③测试时spawn-limits的默认值为正常的10倍，模拟10人时的情况</p>
<p>①:</p>
<p>该参数的倍率Thread.sleep(越高越好)TPS/Chunks/Entities/Tilesdoticktickentity</p>
<p>针对提升</p>
<p>1037.97%19.93/1378/812/524.35%55.29%—203.61%19.01/1378/1635/524.76%86.81%-57.00%400.65%11.82/1378/2935/523.34%93.48%-69.07%566.63%20.00/1378/475/523.34%28.04%50.71%280.32%20.00/1378/188/524.20%13.71%75.21%</p>
<p>②:</p>
<p>该参数的倍率SleepForTick(越高越好)TPS/Chunks/Entities/Tilesdoticktickentity针对提升1018.55%19.83/497/1073/16/37.173.26%60.09%—200.00%14.22/304/2037/14/59.192.97%81.17%-70.16%400.00%6.54/309/4014/14/131.994.07%84.70%-81.90%556.21%20.00/399/533/16/20.840.31%31.75%47.17%279.27%20.00/396/221/15/10.217.27%12.05%79.95%</p>
<p><strong>当服务器为10人左右时，将此配置项设置为原来的一半(即35/7/3/7)最多可以降低50%的实体数量，降低为原来的1/5可能会引起玩家的愤怒(平均每个人周围只有19实体.这会导致玩家周围基本不刷怪)，如果你的服务器内玩家超勇，并且你用了较好的CPU，设置为原来的1.5~2倍，然后提升monster-spawns的数值，也不会影响多少TPS。<br><br> 因此，推荐您将各数值设置为原来的30%至原来的75%。_[推荐1.14+的版本降低的更多，经测试，1.15.2中500区块平均会产生一千多个实体]_</strong></p>
<ol start="3">
<li>chunk-gc</li>
</ol>
<p>(Test ID:33-36)</p>
<p>chunk-gc.period-in-ticks (多少tick回收一次区块，默认值=600，即30秒。修改此项同时也要修改paper.yml内的delay-chunk-unloads-by，或者禁用其中一项)</p>
<p>chunk-gc.load-threshold<br><em>[1.13-]</em></p>
<p>(两次区块回收之间，需要加载多少区块才能进行下一次区块回收，默认=0)</p>
<p>这两项数值不会影响很多性能</p>
<p>这是测试chunk-gc.period-in-ticks在不同情况下的性能占用:</p>
<p>(耗时1h)<br>①：在出生点时，不加载额外区块，区块回收占用_[1.12]_<br>②：匀速移动200格后，区块回收占用_[1.12]_<br>chunk-gc.period-in-ticksThread.sleepprocessChunkGC600-①92.33%0600-②49.10%01-①90.85%0.80%1-②60.28%1.05%<br><strong>默认值时，区块回收占用几乎为0(实际情况是根本找不到区块回收这一项，应该是小于0.01%，采样时间是60s，不可能没记录到)，设置为1时，玩家禁止时候区块回收占用略高(0.80%，移动时虽然区块回收占用有1.05%，但是加快了服务器内区块回收，及时减少了区块回收的数量，能挽回区块回收带来的占用亏损，甚至还赚了一些。<br> 但是我们不建议您设置为1，如此频繁的区块回收在服务器玩家过多，区块数量很多时(如大于5000)，区块回收占用就很可怕了，因此建议您设置的数值不要低于100。</strong></p>
<p><strong>Spigot.yml</strong></p>
<p>适用服务端:Spigot Paper Mohist Catserver等</p>
<ol>
<li>Mob-spawn-range</li>
</ol>
<p>(Test ID:25-32)(以玩家为中心的半径多少区块内可以刷怪，默认1.12-=4,1.13+默认值=8)</p>
<p><strong>⚠️数值设置大于9，也不会在9区块外刷怪，因为原版刷怪机制为：生物离玩家最多128格，否则刷出的怪物将被删除<br> ⚠️数值低于8时，服务器内刷怪量低于或远低于正常刷怪量[仅1.13或更低版本]</strong></p>
<p>在1.13或更低版本的服务器上，较低的数值会导致刷怪量急剧减少，这是因为bukkit.yml内的spawn-limits限制了平均一个区块内能生成多少生物，而mob-spawn-range会阻止较远的区块生成怪物，两项配置的共同作用使得刷怪数量远低于正常水平</p>
<p>测试内容:</p>
<p>①修改mob-spawn-range，bukkit内spawn-limits为原来的3倍时候，服务器内生物刷新的状况[1.12]</p>
<p>附加参数:</p>
<p>①view-distance=16</p>
<p><strong>①</strong><br>mob-spawn-range数值Thread.sleep(越高越好)TPS/Chunks/Entities/Tilesdoticktickentity针对提升490.92%19.97/1089/25/95.04%1.64%—590.63%20.00/1089/39/94.87%1.51%5.56%690.19%19.97/1089/59/94.59%2.33%-25.05%889.94%19.96/1089/93/94.69%2.41%-29.23%1090.28%19.97/1089/99/94.53%2.02%-15.10%391.02%19.93/1089/17/94.68%1.35%8.34%290.69%19.88/1089/8/95.03%1.15%16.20%190.03%19.99/1089/3/95.82%1.37%13.13%<br><strong>在1.14或高版本的服务器上，mob-spawn-range的作用类似bukkit.yml中的生物生成配置，测试时设置为3的刷怪速度只有设置为8刷怪速度的10%左右,不过不会影响刷怪量<br> 不过为了配合ticks-per，推荐将这项数值修改为3~4<br> 在1.14以下版本的服务器上<br>mob-spawn-range会使刷怪量大幅减少</strong><br><strong>将mob-spawn-range设置为9以上，每名玩家大约会额外降低至少1%的服务器线程睡眠占比<br> 将mob-spawn-range设置为1，还是能见到刷怪，但已经很少了<br> 如果您真切需要这0.5%的占用(换算成事件耗时的话最多为5%，这5%是真实的优化)，或者您的服务器内玩家很多，此项配置可改为3(但是较低的mob-spawn-range数值会导致刷怪塔的性能不能被完全榨干)<br> 如果您想让您的服务器回归bukkit/原版刷怪机制，修改到8或10也是一个不错选择，而且带来的服务器负担也不是很多(0.8%，换算为事件耗时约为8%)</strong></p>
<ol start="2">
<li>entity-activation-range</li>
</ol>
<p>(Test ID:37-42)(以玩家为中心，生物距离玩家多少格内才被激活/每秒被激活的数量限制，默认值在下方，已折叠)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">entity-activation-range:</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;#1.15&amp;#x65B0;&amp;#x589E;&amp;#xFF0C;&amp;#x8BBE;&amp;#x7F6E;&amp;#x5BF9;&amp;#x6751;&amp;#x6C11;&amp;#x7684;&amp;#x98DE;&amp;#x884C;&amp;#x602A;&amp;#x7269;&amp;#x7684;&amp;#x6FC0;&amp;#x6D3B;&amp;#x8303;&amp;#x56F4;</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;villagers: 32</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;flying-monsters: 32</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;#1.15&amp;#x65B0;&amp;#x589E;&amp;#xFF0C;&amp;#x8BBE;&amp;#x7F6E;&amp;#x5DE5;&amp;#x4F5C;&amp;#x7684;&amp;#x6751;&amp;#x6C11;&amp;#x7684;&amp;#x6FC0;&amp;#x6D3B;&amp;#x8303;&amp;#x56F4;</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;villagers-work-immunity-after: 100</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;villagers-work-immunity-for: 20</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;villagers-active-for-panic: true</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;#1.14&amp;#x65B0;&amp;#x589E;&amp;#xFF0C;&amp;#x8BBE;&amp;#x7F6E;&amp;#x5BF9;&amp;#x88AD;&amp;#x51FB;&amp;#x602A;&amp;#x7269;&amp;#x7684;&amp;#x6FC0;&amp;#x6D3B;&amp;#x8303;&amp;#x56F4;</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;raiders: 32</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;#&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;&amp;#x52A8;&amp;#x7269;/&amp;#x602A;&amp;#x7269;/&amp;#x6389;&amp;#x843D;&amp;#x7269;/&amp;#x6C34;&amp;#x6D41;&amp;#x7684;&amp;#x6FC0;&amp;#x6D3B;&amp;#x8303;&amp;#x56F4;</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;animals: 32</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;monsters: 32</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;misc: 16</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;water: 16</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;#1.14&amp;#x65B0;&amp;#x589E;&amp;#xFF0C;&amp;#x548C;&amp;#x4E0D;&amp;#x6D3B;&amp;#x8DC3;&amp;#x6751;&amp;#x6C11;&amp;#x6709;&amp;#x5173;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x610F;&amp;#x4E49;&amp;#x4E0D;&amp;#x660E;</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;tick-inactive-villagers: true</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;#1.14&amp;#x65B0;&amp;#x589E;&amp;#xFF0C;&amp;#x8BBE;&amp;#x7F6E;&amp;#x5BF9;&amp;#x751F;&amp;#x7269;&amp;#x88AB;&amp;#x6FC0;&amp;#x6D3B;&amp;#x7684;&amp;#x901F;&amp;#x5EA6;&amp;#x9650;&amp;#x5236;</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;wake-up-inactive:</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;animals-max-per-tick: 4</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;animals-every: 1200</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;animals-for: 100</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;monsters-max-per-tick: 8</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;monsters-every: 400</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;monsters-for: 100</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;villagers-max-per-tick: 4</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;villagers-every: 600</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;villagers-for: 100</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;flying-monsters-max-per-tick: 8</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;flying-monsters-every: 200</span><br><span class="line">&amp;#xA0; &amp;#xA0;&amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;flying-monsters-for: 100</span><br></pre></td></tr></tbody></table></figure>



<p>测试内容:</p>
<p>①不同entity-activation-range.monsters数值时，玩家绕500只分散的僵尸移动时，服务器占用[1.12]</p>
<p>附加参数:</p>
<p>①:禁用区块回收</p>
<p>②:将paper.yml内的despawn-ranges.soft设置为128(否则服务器内的怪物会被缓慢删除，影响测试效果)</p>
<p>③:view-distance=16</p>
<p>①<br>entity-activation-range.monsters数值Thread.sleep(越高越好)TPS/Chunks/Entities/TilestickentityEntityZombie针对提升3282.96%19.99/1513/501/212.66%7.02%—2884.95%19.96/1513/501/212.67%5.40%17.38%2485.40%19.96/1513/502/212.66%4.95%21.90%2087.70%19.96/1513/501/212.73%3.82%36.70%1688.34%19.98/1514/500/212.44%3.09%44.78%1289.50%19.97/1514/499/213.39%2.62%50.53%</p>
<p><strong>当entity-activation-range.monsters为默认值一半的时候，怪物的耗时降低了一半多，但是16这个数值对于玩家是几乎无法游玩的(看到的怪物大多都没有激活，玩家没有游戏体验)，设置到24的时候，怪物的占用也有30%的降幅。<br> 而animals/villagers等其他配置的优化效果和monsters是一样的，可以根据表格内的优化效果修改，且动物对于玩家的影响不大，改为12也没什么关系。<br> 村民被激活时的寻路AI占用了大量的tick。<br>flying-monsters貌似仅仅是指幻翼。<br>misc是指掉落物，如果你的服务器内有很多生成掉落物的机器(如:用岩浆块杀死怪物的刷怪塔，地毯机，0t机器)，可以适当降低此项，但</strong> <strong>不能设置为1或更低</strong>， <strong>否则会出现实体无法捡起等一系列奇妙的bug<br>water这一项此项还是不动最好。<br>wake-up-inactive的修改意义不大，大型服务器可能还要增加这些数值<br> 因此，如果您的服务器是养老生存服，且大型机械非常多，玩家又喜欢养动物，可以设置为viilagers:16 flying-monsters:18<del>24 monsters: 18</del>24 animals: 8<del>12 misc:2</del>4 water:16 wake-up-inactive设置为原来的50%<br> 如果您的服务器是RPG服，这几项只能微调。<br> 注意:过低的monsters数值会导致刷怪塔效率降低，甚至不工作!(经过测试，monsters的数值是指怪物与玩家的水平距离，与竖直距离无关)</strong></p>
<ol start="3">
<li>max-tick-time</li>
</ol>
<p>(Test ID:48-52)(在服务器的两个tick之间，实体/方块实体最多允许被计算多长时间，单位毫秒，默认tile:50，entity:50)</p>
<p>默认数值已经足够了，如果你的服务器实体/方块实体占用极高，降低这两项数值可能会有显著的提升。如果实体/方块实体占用不高如果设置太低，实体/方块实体会跳过计算，可能会导致玩家体验下降/漏斗分类机堵塞之类的bug。</p>
<p>测试内容:</p>
<p>①使用<br><strong>Spigot</strong></p>
<p>核心(因为paper禁用此项)，在不同max-tick-time.entity数值的情况下，1400只实体的占用，以及玩家怪物计算被跳过的情况<br><em>[1.12]</em><br><em>(由于tile很难达到50ms/tick，因此不测试max-tick-time.tile，且max-tick-time.entity的规律适用于tile)</em></p>
<p>附加参数:</p>
<p>①View-distance=16</p>
<p>②/gamerule doMobSpawning false(禁止生物自然生成)</p>
<p>③使用timings v1进行数据收集，而不是spark(spark对于低tps时的采样效果不好)</p>
<p>max-tick-time-entity数值Full Server TickTPS/Chunks/Entities/Tilestickentity实体计算被跳过状况针对提升50109.38%16.92/1127/1437/25100.75%中等—4090.71%19.95/1123/1435/2580.81%中等最高20%3070.97%19.88/1123/1431/2560.83%中等最高40%1538.83%19.92/1123/1430/2530.65%严重最高70%518.17%19.92/1123/1411/2510.72%极为严重最高90%</p>
<p><strong>max-tick-time.tile同理<br> 针对提升中的”最高”指的是当服务器内实体/方块实体达到100% tick占用时(即50ms 达到了默认值的阈值)，但是大多数服务器都无法达到这个数值，所以您需要使用Timings进行采样(输入/timings on 三分钟后输入/timings paste)，然后在输出结果的网页内内找到”tickentity”一项的Pct Tick</strong></p>
<p>**如果max-tick-time没有修改过，您又需要优化，您可以将max-tick-time.entity修改为[tickentity最高时占用(%)<em>50-5]，大约会带来10%的实体占用下降<br> 如果您修改过max-tick-time,且tickentity占用(%)<em>50≈max-tick-time.entity，就不建议再改了<br>max-tick-time.tile与max-tick-time.entity同理，只是tile的占用=每一种tile占用的总和，需要自己计算<br> 注意事项:</em></em></p>
<p>①此配置项在paper上不生效<br><em>(已经在paper.yml找过了，没有启用这个配置项的选项，在paper上的数据请看腾讯文档内Test ID:43-47)</em></p>
<p>，这好像是Paper官方自己禁用的</p>
<blockquote>
<p>PaperSpigot does not offers “max-tick-time”<br>PaperSpigot 不支持max-tick-time</p>
</blockquote>
<p>②降低此项可能会给服务器带来不稳定，特别是RPG服务器，如数据不同步等，但是它带来的优化效果真的很可观</p>
<blockquote>
<p>There’s a reason PaperSpigot doesn’t offer it: You shouldn’t use it! That system is fundamentally broken in implementation and can cause inconsistencies with your server.</p>
</blockquote>
<p>这就是PaperSpigot不支持它的原因，你就不应该用它!它从源头上破坏了服务器的正常运转，导致了服务器的不同步<br><em>翻译自<a target="_blank" rel="noopener" href="https://aikar.co/2015/10/08/spigot-tick-limiter-dont-use-max-tick-time/">https://aikar.co/2015/10/08/spig ... -use-max-tick-time/</a>注:aikar是paperspigot的维护者之一</em></p>
<ol start="4">
<li>ticks-per</li>
</ol>
<p>(Test ID:53-58)(漏斗多少tick传输一次，多少tick检查一次，默认hopper-transfer: 8 hopper-check:1)</p>
<p><strong>hopper-amount</strong></p>
<p>(漏斗一次传输几个，默认值为1，此项不影响性能，但是会影响效率)</p>
<p>测试内容:</p>
<p>①100个漏斗传输物品时，不同数值下(这三个数值的1倍，2倍，3倍，4倍，5倍)，漏斗的占用<br><em>[1.12]</em></p>
<p>其他参数:</p>
<p>①/gamerule doMobSpawning false(禁止生物生成，因为测试的时候动用了summon命令生成怪物来生成掉落物)</p>
<p>②使用spigot核心</p>
<p>①:<br>(8,1,1代表hopper-transfer: 8 hopper-check: 1 hopper-amount:1)<br>各数值倍率Thread.sleep(越高越好)TileEntityHopper针对提升1x(8,1,1)-传输时95.68%1.07%—2x(16,2,2)-传输时95.23%0.96%10.29%3x(24,3,3)-传输时95.68%0.85%20.57%4x(32,4,4)-传输时96.19%0.67%37.39%5x(40,5,5)-传输时96.45%0.64%40.19%1x(8,1,1)-不传输时96.37%0.48%—<br><strong>不修改数值时，大约每个漏斗会占用0.01%(0.005ms)的服务器tick，但是多个漏斗叠加的占用还是挺多的(一般用到漏斗的大型机器有1000+个，差不多就要占用10%tick了)。按照站内一些教程给的推荐数值(3x；24,3,3), 大概只能降低20%的漏斗tick，属实没劲，即使这个数值设置到全站给过的最高数值(5x；40,5,5),也只能降低40%占用，这是因为Tile与Entity不同，Entity由于受到entity-activation-range的限制，不工作的实体占用几乎为0。而Tile时刻都有一定计算，在不工作的情况(见表格第六行)也有一定的占用。<br> 同时，修改了ticks-per和hopper-amount后，物品每次传输间隔时间和数量都修改了，许多和漏斗有关的机器都可能出现Bug，如抽.奖机，分拣机。hopper-check大于1可能还会导致物品复制的小bug，为了减少或防止这种不同步，hopper-transfer数值最好要是hopper-check的倍数。<br> 因此，对于生存服，如果服务器内的漏斗很多，那还是建议设置为(16,4,2 hopper-check也占用了一定性能，所以多提升了一些)，如果漏斗占用不高，只建议更改hopper-check<br> 对于RPG服，且又需要漏斗的，可以考虑直接改为(1,4,32)，这样漏斗传输速度很快，传输时间变短，占用会下降很多。<br> 对于Mod服，修改为5x~10x即可。</strong></p>
<ol start="5">
<li>max-tnt-per-tick</li>
</ol>
<p>(Test ID:122-125)(每个tick最多计算多少个tnt，默认=100)</p>
<p>测试内容:</p>
<p>①不同数值时5000余个TNT爆炸时，服务器的状况以及TNT的占用<br><em>[1.12]</em></p>
<p>②不同数值时2000余个TNT爆炸时，服务器的状况以及TNT的占用<br><em>[1.15]</em></p>
<p>附加参数:</p>
<p>①view-distance: 16</p>
<p>max-tnt-per-tick数值Thread.sleep(越高越好)TPS/Chunks/Entities/TilestickentityTNT占用针对提升1001.43%10.96/1094/118/142.55%81.77%—2033.64%19.87/1089/3904/132.76%59.66%27.04%560.76%19.34/1089/4766/133.27%29.49%64.94%183.45%19.84/1089/3728/132.29%10.27%87.45%<br>max-tnt-per-tick数值Thread.sleep(越高越好)TPS/Chunks/Entities/Tiles/mspttickentityTNT占用针对提升10052.11%20.00/529/110/16/32.219.54%13.71%—2066.71%20.00/529/1612/16/15.116.13%9.80%28.52%576.97%20.00/529/1367/16/10.611.73%3.67%73.34%179.41%20.00/529/1794/16/9.78.71%1.67%87.82%<br><strong>在max-tnt-per-tick为默认值时，爆破5000余个TNT时，TPS降低较多，仅能保持9~10，但是TNT的处理速度很快，15秒不到的样子。在max-tnt-per-tick设置到20后，能明显看见了TNT计算滞后，处理很慢。同时实体积压，60秒后还有4000多个实体(已被点燃的TNT)待处理。设置为5和1时，TNT的爆炸处理明显缓慢，周围TNT甚至出现了没有被激活的情况，到最后还有一部分TNT没有被引爆，这样会导致许多需要TNT的大型机器威力下降甚至炸膛(少量TNT复制机器不受影响)，这也明显减弱了熊孩子放置大量TNT的威力。<br> 对于任何服务器，设置为20即可(也可设置为10)，高于这个数值的优化效果较差，低于这个数值会导致TNT计算滞后。<br> 对于一些正在用TNT清理区块的服务器，可以临时恢复为100。</strong></p>
<p><strong>Paper.yml</strong></p>
<p>适用服务端：Paper</p>
<p><strong>1. world-settings.max-chunk-gens-per-tick</strong><em>[1.13-]</em></p>
<p>(每个世界中每tick最多生成多少区块，默认=10)</p>
<p><strong>world-settings.max-auto-save-chunks-per-tick</strong></p>
<p>(每个世界中保存地图时，每tick最多保存多少区块，默认=24)</p>
<p><strong>world-settings.max-chunk-sends-per-tick</strong><em>[1.13-]</em></p>
<p>(每个世界中每tick最多发送多少区块，默认=81)</p>
<p><strong>注:生成≠发送，生成这里指的是从未被加载过的区块，发送指的是已经加载过的区块</strong></p>
<p>这三个配置项放在一起的原因:</p>
<p>①它们的功能都相似</p>
<p>②它们对于服务器的优化效果不是很明显(除非服务器玩家跑的比香港记者还快/网速感人)，但是这三项数值对于提升服务器的稳定性(可以让tps更平滑，减少跑图/世界保存带来的突发tps降低)</p>
<p>测试内容:</p>
<p>①不同数值时，5倍移动速度平稳加载新区块时，服务器tps和CPU占用<br><em>[1.12]</em></p>
<p>附加参数:</p>
<p>①view-distance=16</p>
<p>①:由于world-settings.max-auto-save-chunks-per-tick优化效果很小，且这个数值不会影响性能，所以没放入测试（主要是测不出，强行测的话误差大）<br>max-chunk-sends/gens-per-tick数值Thread.sleep(越高越好)TPS/Chunks/Entities/TilesdotickCPU占用针对提升默认值(81，10)0%18.89/992/227/1980.66%84%—20%20.00/1043/310/3481.60%80%4.80%171.51%20.00/599/160/923.45%46%45.24%<br><strong>虽然看着提升很大，但实际肯定不能这样用<br> ①测试的时候是飞行5倍速，速度为54m/s，那么每秒可以移动3.375个区块，同时视野距离为16，那么玩家每移动一个区块就会加载36区块(不考虑斜向)、这样的话每秒就会加载121.5个区块，不考虑网络的情况下(实际上网络没满)，max-chunk-sends/gens-per-tick都设置为1时，有80%+的区块被跳过加载了</strong>。 <strong>正常的玩家疾跑速度是5.612m/s，换算下来在16视野距离时，每秒需要加载12.6个区块，如果是-80%的区块(区块只能加载到最大值的20%)加载折扣肯定让玩家无法接受，因此推荐平均每个玩家只能加载到最大值的70%，也就是8.5区块每秒，对应的max-chunk-sends/gens-per-tick就是0.425(当然，max-chunk-gens-per-tick可以更低，如0.35)。<br> ②这是一个世界性选项，作用在整个世界上，而一个世界又有很多玩家，我测试的时候是独自一人的，所以最终数值要乘以服务器玩家。<br> ③玩家加入的时候，会满速加载区块，大概3<del>5秒就要加载400</del>1000区块。为了防止这样的突发事件，还要增加max-chunk-sends/gens-per-tick数值<br><br> 综上所述</strong>，max-chunk-sends/gens-per-tick的设置公式={[V*2+4]<em>S/320</em>P}*0.7+5<br>V=view-distance数值<br>S=玩家疾跑时的速度，默认=5.612。如果你的服务器玩家普遍加速，这个数值还要上升<br>P=服务器内玩家最多的那个世界的 <strong>平均活跃人数</strong>(需要减去挂机人数，这一部分人不加载区块，只要不是核心跑图玩家就都建议去掉)<br>最终数值 <strong>一定要取整</strong>(取上取下自由选择)，同时max-chunk-gens-per-tick可以适当降低</p>
<p>如:某世界平均活跃玩家为30的服务器，view-distance=12，玩家各个拿着+100%移速的屠龙宝刀<br>数值就应该设置为26<em>11.224/320</em>30*0.7+5=24.11，取整后为24<br>这样每秒最多加载480格区块，平均每个玩家分到16区块；1名玩家正在进入服务器时，每名玩家也能分到12区块。既能保证玩家不流失体验，又可以略降服务器占用(如果服务器玩家频繁进出，效果会更好)</p>
<ol start="2">
<li>Timings.enabled</li>
</ol>
<p>(Test ID:64-71)(是否开启timings，默认=true)</p>
<p><strong><a target="_blank" rel="noopener" href="https://bbs-archive.github.io/thread.html?t=971665">Timings</a> 是一个服务器分析工具，虽然很轻量，但仍然会有一定占用，服务器不会每时每刻都用Timings。</strong></p>
<p>测试内容:</p>
<p>①在服务器的不同占用情况下(即每秒tick数不同时)，co.aikar.timings.FullserverTickHandler.stopTiming与co.aikar.timings.FullserverTickHandler.startTiming的总占用<br><em>[1.12]</em></p>
<p>附加参数:</p>
<p>①在第7/8个测试中，Entity-activation-range和Entity-tracking-range都为128</p>
<p>①: (耗时4h)<br>是否启用Timings/实体数Thread.sleep(越高越好)TPS/Chunks/Entities/TilesTimings的占用综合提升flase/4094.06%19.75/1089/42/120.08%—true/0493.93%19.88/1089/39/120.19%1.85%false/50090.95%19.98/1089/530/120.03%—true/50089.93%19.97/1089/534/120.23%2.20%false/200081.02%19.93/1089/2029/120.08%—true/200079.14%19.83/1089/2034/120.18%0.52%false/2000/怪物全部被激活18.09%19.96/1089/2033/120.03%—true/2000/怪物全部被激活8.05%19.93/1089/2032/120.15%0.14%<br><strong>即使打开Timings，大约也只会占用0.15%<del>0.25%的服务器tick，如果关闭此项则可以降低0.1%</del>0.2%(因为co.aikar.timings.FullserverTickHandler.startTiming[开始Timing的事件]依然存在，不会消失。这0.1%的服务器tick占用可以化作0.1%~2%的TPS提升/mspt降低，这一点提升完全可以不在意。<br> 但是，如果你的服务器内安装了一些可以代替timings的插件，例如spark。那么你完全可以选择关闭这一项选择<br> 如果你偶尔需要使用Timings，又没有替代插件，我还是推荐保留了。<br> 如果你没用过….哦，那没事了，直接关掉吧，不用想。</strong></p>
<ol start="3">
<li>world-settings.anti-xray.enabled</li>
</ol>
<p>(Test ID:72-81)(是否启用反透视，默认=false。这里不讨论其他配置，因为不会影响性能)</p>
<p>注意:①测试的时候engine-mode=1(也是默认值)似乎是没有用的，但设置为2时可以生效</p>
<p>②反透视的原理是服务器修改数据包，让服务器发给玩家的关于区块数据的数据包中都充满假矿，玩家收到数据包后，自己看不见的区域都会变成假矿。如果玩家正在用一些作弊mod透视矿物，他看到的将都是假矿</p>
<p>测试内容:</p>
<p>①开启和关闭反透视的两种情况下，服务器的sleep占比和ServerConnection(绝大部分为数据包交换)的占用，并多次测试求平均值<br><em>[1.12]</em></p>
<p>附加参数:</p>
<p>①前面说过了的world-settings.anti-xray.engine-mode=2</p>
<p>①: (耗时3h,这里只给了求平均值后的结果，没给原值)<br>是否启用anti-xrayThread.sleep平均值(越高越好)ServerConnection平均值(越低越好)综合提升|针对提升是(默认值)94.348%0.798% —|—否94.376%0.71% 0.45%|11.03%</p>
<p><strong>如果关闭此项，也许可以给服务器带来0.45%的TPS提升(虽然各测5次，但还是有误差，有可能这是误差原因)，同时也也可以降低每个玩家10%左右的占用，如果服务器玩家多了，不开启这一项也能有一点效果。<br> 如果服务器是生存服，有需要反矿透，我建议直接打开，因为没有哪个反矿透插件占用比这个配置还低了。<br> 如果是很多人的商业性质服，开启它有什么意义呢(笑)，还不如关掉优化一下给玩家更好的体验。</strong></p>
<p>4.world-settings.despawn-ranges</p>
<p>(Test ID:82-85)(生物离玩家多远将会被删除,soft是缓慢地依次删除[随溢出实体数量增加而变快],hard是直接删除。默认值soft=32，hard=128)</p>
<p>这里的soft不能比hard高，否则高出部分没有意义。而且不建议比spigot.yml内entity-activation-range.monsters低，否则可能怪物对你有仇恨却突然没了</p>
<p>这项数值会尽量保证服务器内的实体回到bukkit.yml内spawn-limits限制的范围以下，除非实体不能再被删除了</p>
<p>测试内容:</p>
<p>①新生成的僵尸=服务器内限制生物数量，且生物已经饱和的情况下，不同soft数值下服务器的状况(没有动hard，因为会改变实体机制)[1.12]</p>
<p>附加参数:无</p>
<p>①: (耗时3h)<br>world-settings.despawn-ranges.soft数值Thread.sleep(越高越好)TPS/Chunks/Entities/Tilesdoticktickentity针对提升3290.86%19.97/1089/146/2652.54%3.62%—2491.20%19.98/1089/123/2653.14%2.61%27.9%6491.24%19.79/1089/179/2653.29%3.19%11.82%12889.85%19/99/1089/234/2652.37%4.63%-27.9%<br><strong>在world-settings.despawn-ranges.soft降低到24后，实体减少了20%左右，最多可以降低27.9%的实体。设置到128后，实体相比32时多了至少50%。<br> 但是真有这么大的变化效果?<br> 实际会比这个小，因为在服务器中，玩家如果不加载区块，通常实体是不会多于限制的。只会有一些刷怪笼或者非自然生成的生物超过这个限制。而despawn-ranges的目的就是删除这些非自然生成的生物。当玩家跑图时，由于加载了新的区块，实体会明显超过限制，world-settings.despawn-ranges.soft的意义就不是很大了，此时world-settings.despawn-ranges.hard才更有用处(但hard对于服务器内一些实体的机制有影响，同时会减少刷怪[服务器内刷怪距离为24~128，比如设置到64时，随机tick刷新的怪物离玩家距离为80，将被直接删除，相当于本次实体刷新尝试失败]，因此不建议设置到64以下</strong>)<br><strong>如果你的服务器玩家经常跑图，但是总体实体不是很多，可以适当下降world-settings.despawn-ranges.hard(比如降低到96)。<br> 如果你的服务器内实体特别多，而且你降低过spigot.yml的entity-tracking-range。可以将world-settings.despawn-ranges.soft设置和前面那个数值接近的水平。world-settings.despawn-ranges.soft也可以下降到80~96。<br> 如果你的服务器玩家都很肝，且他们抱怨某些实体总是会消失，那么world-settings.despawn-ranges.soft完全可以设置为64。</strong></p>
<ol start="5">
<li>world-settings.optimize-explosions</li>
</ol>
<p>(Test ID:86-93)(是否开启paper对于爆炸的优化，死亡的实体会被立即清除等，从而减少爆炸占用。默认=false)</p>
<p>开启后爆炸时的实体将被缓存而不是重复计算，1.15或更高的版本开启此项可能效果不明显</p>
<p>测试内容:</p>
<p>①不同数量TNT爆炸时，TNT的占用和睡眠的tick占比<br><em>[1.12]</em></p>
<p>②不同数量TNT爆炸时，TNT的占用和睡眠的tick占比<br><em>[1.15]</em></p>
<p>附加参数:无</p>
<p>①: (耗时3h)<br>TNT数量/采样时间/是否开启该配置项Thread.sleep(越高越好)TPS/Chunks/Entities/TilestickentityTNT的占用针对提升(同比)336<em>1/30s/否87.58%19.23/1089/98/126.83%4.67%—336</em>3/45s/否74.36%19.82/1089/251/1219.34%15.65%—336<em>8/45s/否35.85%17.33/1089/100/1257.08%52.82%—336</em>16/45s/否7.72%14.38/1089/168/1288.21%80.87%—336<em>1/30s/是91.65%19.92/1089/161/122.80%0.97%79.23%336</em>3/45s/是79.88%19.87/1089/150/1213.97%11.57%26.08%336<em>8/45s/是49.58%19.58/1089/148/1241.91%37.74%28.55%336</em>16/45s/是17.63%14.72/1089/273/1276.91%66.70%17.53%<br>②: (耗时2h)<br>TNT数量/采样时间/是否开启该配置项SleepForTick(越高越好)TPS/Chunks/Entities/Tiles/mspttickentityTNT占用针对提升864<em>1/30s/false61.12%20.00/235/148/11/7.425.42%13.79%—864</em>2/30s/false44.61%19.10/162/134/11/7.439.61%33.68%—864<em>4/45s/false24.14%18.73/289/282/15/11.256.14%38.72%—864</em>1/30s/true63.82%20.00/242/124/11/7.124.44%17.84%9.36%864<em>2/30s/true45.38%19.25/253/137/11/7.431.63%24.83%27.28%864</em>4/45s/true41.07%18.25/289/162/15/6.632.30%24.08%28.51%</p>
<p><strong>开启此项后，TNT的占用同比下降了10%~30%。同时TPS有一定幅度的提升<br> 开启此项后，在禁止TNT爆炸的生存服内几乎没有优化效果；在允许TNT爆炸的生存服内，如果使正在使用盾构机等大型机器，会有显著的优化效果(平常的时候没有)；在一些使用爆炸效果多的RPG服务器中，开启这一项可以来带稳定的爆炸占用下降。<br> 并且建议所有服务器都打开此项，因为没有副作用。</strong></p>
<ol start="6">
<li>world-settings.hopper.disable-move-event</li>
</ol>
<p>(Test ID:93-97)(是否禁用漏斗的move事件，禁用后可以降低漏斗占用，但coreprotect，领地插件等可能无法记录或保护漏斗物品)</p>
<p>注意:这个选项上方还有一个push-based<br><em>[高版本已被移除]</em></p>
<p>，可能可以对漏斗进行优化，但有重大BUG[详情见github issue<br><a target="_blank" rel="noopener" href="https://github.com/PaperMC/Paper/issues/763">#763</a> <a target="_blank" rel="noopener" href="https://github.com/PaperMC/Paper/issues/763">#354</a></p>
<p>]，因此在后期版本删除了此项，本贴也不对push-based进行测试</p>
<p>测试内容:</p>
<p>①当漏斗传输和不传输时，分别启用和禁用move事件时，漏斗的占用[1.12]</p>
<p>附加参数:无</p>
<p>①: (耗时2h)<br>配置项数值/漏斗是否正在传输Thread.sleep(越高越好)TPS/Chunks/Entities/Tiles漏斗占用针对提升false/是87.49%19.05/1106/98/6561.49%—true/是89.54%19.65/1106/96/6560.93%37.59%false/否88.93%19.85/1106/100/6302.11%—true/否88.69%19.88/1106/105/6311.55%26.55%<br><strong>将此项配置设置为true后(即禁用move事件)，漏斗的占用下降了25%~40%。<br> 但是此项配置不能在以插件玩法为中心的生存/RPG服中开启(通常安装了领地插件/CoreProtect等，会导致漏斗不被保护)，只能在以原版内容为中心的生存服中开启。因此启用此项前请三思，考虑是否要对漏斗move事件进行监听。</strong></p>
<ol start="7">
<li>use-faster-eigencraft-redstone</li>
</ol>
<p>(是否启用theosib的红石优化算法，启用后对于红石的优化巨大。仅1.13~1.15可用，默认=false)</p>
<p><strong>注:由于Mojang在1.16大改红石机制，原算法的作者还没有更新适配1.16的新算法，因此这一项在1.16被移除了</strong></p>
<p>测试内容:</p>
<p>①:启用这项后对于红石计算的优化效果<br><em>[1.13]</em></p>
<p>附加参数:</p>
<p>①:view-distance=8(以后高版本除特殊情况外，默认=8，因为性能差异问题会影响结果)</p>
<p>配置项数值/测试次数Thread.sleep(越高越好)TPS/Chunks/Entities/Tiles/MSPTdotick机械运动的占用(包括红石)综合提升false/1st76.31%19.42/289/225/14/4.77.04%11.43%—true/1st88.52%19.98/289/212/14/4.72.96%0.94%71.66%false/2nd77.86%19.15/289/218/12/4.16.91%10.29%—true/2nd87.71%19.87/289/213/14/4.33.33%1.13%66.75%<br><strong>启用后，对于红石的优化可以达到90%(活塞一类的优化很小)，总体能达到70%的优化效果。<br> 强烈建议服务器都开启这一项，除非启用后红石机器出现问题。</strong></p>
<p>8.keep-spawn-loaded-range</p>
<p>(Test ID:117-121)(出生点加载区块的范围，加载区块数=[(数值*2+1)^2]，默认值=4)</p>
<p>keep-spawn-loaded(是否加载出生点区块，默认值=true)</p>
<p>keep-spawn-loaded-range:0 和keep-spawn-loaded: false的区别：前者会加载出生点的1区块，后者不会加载出生点区块。除非玩家加入服务器并加载了区块。<br><strong>并且keep-spawn-loaded的部分是无法被卸载的</strong></p>
<p>另外，在<br><strong>2019年2月22日</strong></p>
<p>之前构建的paper.jar，在玩家加载出生点前，出生点区块不会被加载，请悉知(论核心更新的重要性)</p>
<p>测试内容:</p>
<p>①无玩家进入时，不同数值的keep-spawn-loaded-range能减少多少的tick占用<br><em>[1.12]</em></p>
<p>②无玩家进入时，不同数值的keep-spawn-loaded-range能减少多少的tick占用<br><em>[1.15]</em></p>
<p>附加参数:无</p>
<p>①: (耗时3h)</p>
<p>keep-spawn-loaded-range数值Thread.sleep(越高越好)TPS/Chunks/Entities/Tilesdoticktickentity综合提升895.90%19.87/289/24/71.50%0.22%—497.27%19.94/81/13/00.99%0.15%1.37%+298.01%19.98/25/2/00.31%0.03%2.11%+0(测试时直接关闭加载了，实际0区块loaded)97.86%19.98/0/0/00.23%0.00%1.96%+1690.42%19.79/1089/61/136.33%0.55%-5.58%+</p>
<p>②: (耗时2h)</p>
<p>keep-spawn-loaded-range数值SleepForTick(越高越好)TPS/Chunks/Entities/Tiles/msptdoticktickentity综合提升893.18%20.00/361/114/15/2.53.96%1.24%—495.62%20.00/121/44/5/1.41.40%0.26%2.44%+297.32%20.00/49/10/0/0.70.20%0.00%4.14%+0(测试时直接关闭加载了，实际0区块loaded)96.48%20.00/0/0/0/0.40.00%0.00%3.30%+1678.54%20.00/1225/335/24/9.118.20%7.32%-14.64%+</p>
<p><strong>关闭keep-spawn-loaded或设置keep-spawn-loaded-range为0后，服务器内的Tick至少下降了2%(要看主城周围的实体/方块实体多不多，多的话这个优化效果会更好；如果服务器玩家经常蜗居在出生点，可能效果会变差一些)。</strong><br><strong>如果关闭这一项，对服务器的优化可能是显著的(出生点实体多的情况下)。<br> 但是这可能会导致生存服中出生点的机器无法循环工作(如刷沙机，这样就要多点人了)，或者multiverse插件小概率出现无法用/mv tp命令传送到别的世界失败的问题。<br> 所以，不建议把keep-spawn-loaded设置为false，但是可以把keep-spawn-loaded-range设置为0(至少加载1区块，防止mv的bug)，如果需要常加载的生存服可以选择把这一项设置为2或4。</strong></p>
<ol start="9">
<li>chunk-tasks-per-tick</li>
</ol>
<p>(1.15+可用，每个tick最多能执行多少次区块的任务，默认=1000)</p>
<p>官方称降低此项数值可能对区块渲染和区块生成有帮助，但在实际测试中(1.15/1.16)，无论设置为多少数值，都无法看见因这项配置带来的区块渲染/生成速度变化，也没有减少实际占用。我目前也不推荐降低此项数值以进行优化。</p>
<p><strong>Global.conf</strong></p>
<p>适用服务端：Sponge</p>
<p>注:文件在服务端目录\config\sponge\global.conf中，这是sponge最主要的配置文档</p>
<p>测试时服务端核心是API7.2.0/SpongeForge，由于本配置文件的配置项较多，还会写出配置项所在第XX行</p>
<p><strong>另外global.conf中有大量内容与server.properties/bukkit.yml/spigot.yml/paper.yml重合，这一部分将不会进行测试</strong></p>
<ol>
<li>deny-chunk-requests</li>
</ol>
<p>(Test ID:98-101/第630行)(设置为true后，所有未加载区块内的请求都会被拒绝。它可以提升一定性能，但它是实验性设置。默认值=false)</p>
<p>启用它可能会导致一些问题，如果这些问题出现了并确定是该项配置导致的，可以根据严重程度考虑关闭它</p>
<p>测试内容:</p>
<p>①玩家不移动和玩家跑图时，开启/关闭此项时的服务器状况<br><em>[1.12]</em></p>
<p>附加参数:</p>
<p>①view-distance=16</p>
<p>①:<br>deny-chunk-requests/是否跑图Thread.sleep(越高越好)TPS/Chunks/EntitiesTPS提升综合提升false/否48.95%20.00/1089/363——true/否57.72%20.00/1089/365017.18%false/是4.73%18.58/2377/818——true/是15.30%19.49/2607/8560.9110.10%<br><strong>启用此项后，有显著的性能提升，并且在TPS能提升接近1。但是测试时(8次启动)中有一次崩溃了，看上去是区块生成的时候导致卡线程，可能和这个配置项有关<br> 但我还是建议你启用此项，配置文件中建议也比较中肯，只是说出现问题后才建议关闭。</strong></p>
<ol start="2">
<li>panda-redstone</li>
</ol>
<p>(Test ID:102-105/第479行)(使用panda4944的红石算法以提升性能，默认值=false)</p>
<p>这项配置在spongeForge服中可能效果不好(MOD服谁用红石啊)，但是如果你是用SpongeVanilla(并且是生存服)，那么这一项的优化效果绝对是显著的。</p>
<p>测试内容:</p>
<p>①:不同红石数量不断更新(并更新周围方块)时，开启/关闭此项配置时红石更新的占用和服务器状况<br><em>[1.12]</em></p>
<p>附加参数:</p>
<p>①这次使用了SpongeVanilla。稳定性更好同时数据更精确</p>
<p>①:<br>panda-redstone配置/测试次数Thread.sleep(越高越好)TPS/Chunks/Entities周围方块更新的占用针对提升false/1st27.40%19.47/1089/34730.54%—true/1st55.36%20.00/1089/3561.27%67.18%false/2nd25.56%19.76/1089/36529.49%—true/2nd52.59%20.00/1089/3591.37%65.89%<br><strong>开启此项后，仅关于红石周围的方块更新优化就达到了95%左右，整体的红石占用也能降低65%左右，而且测试时发现，开启此项后红石更新更加流畅了，并不会损失特性。<br> 对于这种副作用小的选项，我是建议一定要启用的。如果出现了大型机器失效后，可以尝试关闭此项(sponge也修复了一些原版的bug，机器失效时也要注意这些。</strong></p>
<p>3.eigen-redstone</p>
<p>(Test Id:106-112/第432行)(是否启用theosib的红石优化算法，同样可以提升性能，默认值: enabled=false vanilla-decrement=false vanilla-search=false)</p>
<p>enabled决定这个算法是否启用</p>
<p>vanilla-decrement决定了是否使用原版的红石能量等级计算，默认值即为使用优化算法</p>
<p>vanilla-search决定是否使用原版的方块更新机制，默认值即为使用优化算法</p>
<p>测试内容:</p>
<p>①启用这项后对于红石计算的优化效果<br><em>[1.12]</em></p>
<p>②子配置项内两个选项对于红石计算的优化效果<br><em>[1.12]</em></p>
<p>附加参数:</p>
<p>①还是用SpongeVanilla啦</p>
<p>①<br>是否启用/测试次数Thread.sleep(越高越好)TPS/Chunks/Entities针对提升false/1st37.92%19.55/1089/351—true/1st61.31%19.88/1089/36567.36%false/2nd41.65%20.00/1089/360—true/2nd62.48%20.00/1089/36461.40%<br>②<br>工作的红石优化算法Thread.sleep(越高越好)TPS/Chunks/Entities针对提升都不工作(即完全使用原版)34.56%19.77/1089/356—vanilla-decrement50.40%19.94/1089/36048.42%vanilla-search63.36%19.88/1089/36388.02%<br><strong>启用此项后，优化效果与之前的panda-redstone差不多，可能还会略差一些，红石周围的方块更新优化也能达到90%左右，整体的红石占用也能降低60%左右。但是这一项配置可以单独设置启用给的部分，比如使用优化算法会导致某机器无法使用，这样的话你可以设置为使用原版红石能量更新/使用原版方块更新，能保留另一个，同时又有一定的优化效果。</strong></p>
<ol start="4">
<li>mob-spawn-range</li>
</ol>
<p>(同spigot.yml，默认值=4)</p>
<p>但是sponge中，此项修改通常不会影响刷怪上限，修改数值有微弱的实体占用变化(对实体优化不会超过5%)，不过会降低刷怪速度</p>
<p>由于优化效果几乎很小，所以不测试</p>
<p><strong>总结</strong></p>
<p>以下根据结果总结了server.properties/bukkit.yml/spigot.yml/paper.yml/global.conf中的所有配置项</p>
<p><strong>如果你需要自己对配置进行修改，可以查看下面的内容<br> 如果你只需要一个能优化的文件，直接拉到最下面白嫖配置文件即可</strong></p>
<p>优化效果:极好＞好＞较好＞一般＞较差＞差＞极差＞特别差</p>
<ul>
<li><strong>极好:在任何情况下都能让占用至少减半/TPS提升巨大</strong></li>
<li><strong>好:在多数情况下都能减少40%以上的占用/TPS提升很大</strong></li>
<li><strong>较好:一般情况下都能减少客观的占用/提升一定的TPS</strong></li>
<li><strong>一般:优化效果不是特别好，在特定情况下才有明显优化</strong></li>
<li><strong>较差:看不到明显的优化效果，在特定情况下才有较小优化</strong></li>
<li><strong>差:几乎看不到优化效果，在特定情况下才有较小的优化</strong></li>
<li><strong>极差:用debug/timings/spark都很难看出优化效果，跟不用说实际情况了</strong></li>
<li><strong>特别差:挂名配置文件，改了也更没改差不多</strong></li>
</ul>
<p>副作用:无＞极小＞小＞中等＞较大＞大＞极大</p>
<ul>
<li><strong>无:副作用为零</strong></li>
<li><strong>极小:副作用几乎不用考虑，根本不会影响游玩体验</strong></li>
<li><strong>小:副作用小，在一些特定情况会影响游玩体验</strong></li>
<li><strong>中等:有一定的副作用，偶尔会影响游玩体验</strong></li>
<li><strong>较大:时常会影响游玩体验，玩家可能会发现显著的区别</strong></li>
<li><strong>大:常常会影响游玩体验，玩家会发现显著的区别并抱怨</strong></li>
<li><strong>极大:严重影响游玩体验，玩家会发现显著区别且有时无法游玩下去(例如CS:GO变成了回合制游戏)</strong></li>
</ul>
<p>分界线上方是已经测试过的内容，同时有中等或更好的优化效果</p>
<p>分界线下方是未测试过的内容，这些配置项绝大多数优化效果都特别小</p>
<p><em>注:由于帖内宽度的问题，有一部分配置项没有写完全</em><br><strong>对于实体，有18项配置项可以进行优化，其中10项优化效果较好</strong></p>
<p>配置文件配置项优化效果副作用server.properties+spigot.yml➟view-distance较好中等bukkit.yml➟spawn-limits好小bukkit.yml➟ticks-per.monster-spawns好极小~较大bukkit.yml➟ticks-per.animal-spawns一般极小spigot.yml➟entity-activation-range较好小spigot.yml+global.yml➟mob-spawn-range一般无spigot.yml➟max-tick-time.entity较好(paper除外)较大paper.yml➟despawn-ranges较好小paper.yml➟optimize-explosions较好极小global.conf➟living-hard-despawn-range一般中等global.conf➟living-soft-despawn-range一般中等</p>
<p>spigot.yml+paper.yml+global.con➟max-entity-collisions极差无spigot.yml➟squid-spawn-range差无spigot.yml➟arrow-despawn-rate特别差无spigot.yml➟merge-radis差极小paper.yml➟experitence-merge-radis极差极小global.yml➟item-merge-radis差极小global.conf➟item-despawn-rate较差中等global.conf➟living-soft-despawn-minimum-life较差较小</p>
<p><strong>对于方块实体，有1项配置项可以优化，此项优化效果较好</strong></p>
<p>配置文件配置项优化效果副作用spigot.yml➟max-tick-time.tile好(paper除外)中等</p>
<p><strong>对于红石，有3项配置项可以优化，这3项优化效果较好</strong></p>
<p>配置文件配置项优化效果副作用paper.yml➟use-faster-eigencraft-redstone极好小global.conf➟eigen-redstone极好小global.conf➟panda-redstone极好小</p>
<p>注: paper.yml内use-faster-eigencraft-redstone和global.conf内eigen-redstone为同一个算法</p>
<p><strong>对于区块，有12项配置可以优化，其中8项优化效果较好</strong></p>
<p>配置文件配置项优化效果副作用server.properties+spigot.yml➟view-distance极好中等bukkit.yml➟chunk-gc一般无paper.yml➟max-chunk-sends-per-tick较好较大paper.yml➟max-chunk-gens-per-tick较好较大paper.yml➟delay-chunk-unloads-by一般极小global.conf➟chunk-gc-load-threshold一般极小global.conf➟chunk-unload-delay一般极小global.conf➟deny-chunk-requests较好一般</p>
<p>bukkit.yml➟ticks.per-autosave较差极小paper.yml➟max-auto-save-chunks-per-tick差中等global.conf➟auto-save-interval较差极小global.conf➟max-chunk-unloads-per-tick一般较小</p>
<p><strong>对于漏斗，有5项配置可以优化，这5项优化效果较好</strong></p>
<p>配置文件配置项优化效果副作用spigot.yml➟ticks-per.hopper-transfer一般较小spigot.yml➟ticks-per.hopper-check较好极小spigot.yml➟hoppper-amount一般较小paper.yml➟hopper.disable-move-event较好较大</p>
<p><strong>关于其他类型的优化，有1项配置可以优化</strong></p>
<p>配置文件配置项优化效果副作用paper.yml➟Timings.enabled较差极小</p>
<p><strong>更改配置文件虽然能大幅提升性能，但它不是万能的，如果你需要对服务器进行更好的优化，请打开折叠部分</strong></p>
<p>首先需要知道服务器内什么东西会进行tick<br>Full Server Tick大致=区块+实体(不包括玩家)+方块实体+玩家+插件占用+Mod占用<br>配置文件通常只能对区块，实体，方块实体进行优化<br>而玩家和数据包传输这两个部分是几乎不能优化的，但是可以通过其他方式减少它们的占用</p>
<p>玩家的话，可以考虑开bungeecord服，设置几个子服对玩家进行分流，并同步数据。这样既能减少玩家占用也能减少一定的区块/实体/方块实体占用<br>MOD的事件占用几乎无法减少<br>但是插件的事件占用可以通过更换轻量插件/减少不必要的粒子或GUI 从而大幅减少它们的占用<br>比如crazycrates插件，抽奖时的跑马灯式GUI，你完全可以不用它而用其他抽奖插件<br>再比如mythicmobs插件，当怪物的粒子效果较多时服务器会严重卡顿，你当然可以减少粒子效果从而降低mm插件的占用</p>
<p>查看数据包和玩家的占用，可以通过Spark或者Timings<br>Spark:<br>net.minecraft.network.NetworkManager(玩家)<br>net.minecraft.network.PacketThreadUtil(数据包传输，主要是插件和MOD)<br>(不同版本可能有差异，如果搜不到可以只搜索net.minecraft.network)<br>Timings:<br>Connection Handler(玩家，v1/v2都有)<br>Minecraft: Packet(数据包传输,貌似仅v2有)<br>v1的插件事件占用会单独显示</p>
<p>找到关键字后展开内容，spark可以通过看包名(就是net.minecraft这一串)找到是什么东西的事件，timings里面已经给出的事件的来源。不一定需要你全部看懂，只要你知道大致是什么事件，来源是谁即可。找到了占用较高[如果只是一点点占用就不用管了]的插件/MOD，再按照之前黑体字给的方法即可</p>
<p><strong>更多</strong></p>
<p>如果本贴有格式/语法问题，或者你希望我搬运更多教程文章，欢迎联系我！</p>
<p><strong>搬运催更 &amp; 问题反馈</strong> <a target="_blank" rel="noopener" href="https://wj.qq.com/s2/14694423/0278/">快速响应问卷</a></p>
<p>或在下方留下评论。</p>
<p><a href="tag-159.html" title="Cnzw">Cnzw</a> <a href="forum.php?mod=misc&amp;action=recommend&amp;do=add&amp;tid=3385&amp;hash=fef9791f" title="顶一下">赞 (0)<br>;</a> <a href="home.php?mod=space&amp;uid=4579"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://www.pixelbbs.cn/uc_server/data/avatar/000/00/45/79_avatar_middle.jpg">Cnzw Lv2-铁粒;</a></p>
<h3 id="相关推荐"><a href="#相关推荐" class="headerlink" title="相关推荐"></a>相关推荐</h3><ul>
<li><a href="t-3375-1-1.html" title="[1.16-1.19] ServerTap - 通过API获取玩家信息和操作服务器"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/forum.php?mod=image&amp;aid=8865&amp;size=480x300&amp;key=01a72bceb665fdb3">;</a> <a href="f-36-1.html">服务器插件</a></li>
<li><a href="t-3379-1-1.html" title="DriveBackupV2 - 让支持各种备份手段的插件来保护你的服务器"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/forum.php?mod=image&amp;aid=8866&amp;size=480x300&amp;key=deafbcd86e1c05cd">;</a> <a href="f-36-1.html">服务器插件</a></li>
<li><a href="f-36-1.html">服务器插件</a></li>
<li><a href="f-36-1.html">服务器插件</a></li>
<li><a href="f-36-1.html">服务器插件</a></li>
<li><a href="f-36-1.html">服务器插件</a></li>
<li><a href="f-36-1.html">服务器插件</a></li>
</ul>
<div id="lv-container" data-id="city" data-uid="MTAyMC81OTg1MC8zNjMxMg==">
  <script type="text/javascript">
    (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];
      if (typeof LivereTower === 'function') { return; }
      j = d.createElement(s); j.src = 'https://cdn-city.livere.com/js/embed.dist.js'; j.async = true;
      e.parentNode.insertBefore(j, e);
    })(document, 'script');
  </script>
</div>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.9a6de07448a467a377b44596d9ae5da0?rik=8WbMsGmKuRB5XA&amp;riu=http%3a%2f%2fpic.2265.com%2fupload%2f2021-8%2f2021810928385817.png&amp;ehk=Xi9L%2fFaaTMGPUxE7TnAHh3CKp6VDRo44YeVHbgK3Auk%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.9a6de07448a467a377b44596d9ae5da0?rik=8WbMsGmKuRB5XA&amp;riu=http%3a%2f%2fpic.2265.com%2fupload%2f2021-8%2f2021810928385817.png&amp;ehk=Xi9L%2fFaaTMGPUxE7TnAHh3CKp6VDRo44YeVHbgK3Auk%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" title="头像" alt="头像"></a><div class="post-copyright__author_name">Mybbs —— 开源MC社区</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://bianb-hehe.github.io/2024/06/09/t-3385-1-1/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://bianb-hehe.github.io/2024/06/09/t-3385-1-1/')">服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提...</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://bianb-hehe.github.io/2024/06/09/t-3385-1-1/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提...&amp;url=https://bianb-hehe.github.io/2024/06/09/t-3385-1-1/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://bianb-hehe.github.io" target="_blank">Mybbs</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E6%95%99%E7%A8%8B/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>教程<span class="tagsPageCount">20</span></a><a class="post-meta__box__tags" href="/tags/MC/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>MC<span class="tagsPageCount">36</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://ts1.cn.mm.bing.net/th/id/R-C.9a6de07448a467a377b44596d9ae5da0?rik=8WbMsGmKuRB5XA&amp;riu=http%3a%2f%2fpic.2265.com%2fupload%2f2021-8%2f2021810928385817.png&amp;ehk=Xi9L%2fFaaTMGPUxE7TnAHh3CKp6VDRo44YeVHbgK3Auk%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/06/08/loveplugin-cp-1-20-81.8441/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/" onerror="onerror=null;src='https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&amp;riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&amp;ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">LL3 - LovePlugin——跟玩家处cp吧！[结婚插件][支持1.20.81]</div></div></a></div><div class="next-post pull-right"><a href="/2024/06/09/FastAsyncWorldEdit/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/" onerror="onerror=null;src='https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&amp;riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&amp;ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">FastAsyncWorldEdit | 异步创世神插件</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2024/05/31/105138570/" title="Minecraft-纯净服务器搭建全流程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-05-31</div><div class="title">Minecraft-纯净服务器搭建全流程</div></div></a></div><div><a href="/2024/06/10/25886/" title="[转载] [联机教程] [联机]MM帮助文档"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-10</div><div class="title">[转载] [联机教程] [联机]MM帮助文档</div></div></a></div><div><a href="/2024/06/09/2956/" title="Harbinger - 面向中文社区的 1.12.2 Forge Mod 开发指南"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-09</div><div class="title">Harbinger - 面向中文社区的 1.12.2 Forge Mod 开发指南</div></div></a></div><div><a href="/2024/06/28/29569/" title="我的世界命令设计"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-28</div><div class="title">我的世界命令设计</div></div></a></div><div><a href="/2024/05/31/%5B%E8%BD%AC%E8%BD%BD%5D%20%5B%E8%81%94%E6%9C%BA%E6%95%99%E7%A8%8B%5D%20%5B%E8%81%94%E6%9C%BA%5D%5B2021.1.1%5D%5BCPS%5D.schematic%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E8%AF%A6%E8%A7%A3/" title="[转载] [联机教程] [联机][2021.1.1][CPS].schematic文件格式详解"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-05-31</div><div class="title">[转载] [联机教程] [联机][2021.1.1][CPS].schematic文件格式详解</div></div></a></div><div><a href="/2024/05/31/%5B%E8%BD%AC%E8%BD%BD%5D%20%5B%E8%81%94%E6%9C%BA%E6%95%99%E7%A8%8B%5D%20%5BWiki%5D%5BPCD%5DMythicMobs%20%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C%E7%BF%BB%E8%AF%91%20%E5%8F%88%E6%9B%B4%E6%96%B0%E4%BA%86/" title="[转载] [联机教程] [Wiki][PCD]MythicMobs 帮助手册翻译 又更新了"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-05-31</div><div class="title">[转载] [联机教程] [Wiki][PCD]MythicMobs 帮助手册翻译 又更新了</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.9a6de07448a467a377b44596d9ae5da0?rik=8WbMsGmKuRB5XA&amp;riu=http%3a%2f%2fpic.2265.com%2fupload%2f2021-8%2f2021810928385817.png&amp;ehk=Xi9L%2fFaaTMGPUxE7TnAHh3CKp6VDRo44YeVHbgK3Auk%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%8E%A8%E8%8D%90"><span class="toc-number">1.</span> <span class="toc-text">相关推荐</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/05/26/8684/" title="[Github] MCBBS-Client">[Github] MCBBS-Client</a><time datetime="2026-05-26T05:03:32.000Z" title="发表于 2026-05-26 13:03:32">2026-05-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/24/2589378/" title="「Disqus」为 hexo 博客添加文章推荐功能">「Disqus」为 hexo 博客添加文章推荐功能</a><time datetime="2025-09-23T20:17:35.000Z" title="发表于 2025-09-24 04:17:35">2025-09-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/24/28523795/" title="「视频」MC绷带指令">「视频」MC绷带指令</a><time datetime="2025-09-23T20:17:35.000Z" title="发表于 2025-09-24 04:17:35">2025-09-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/07/4969/" title="打个招呼吧">打个招呼吧</a><time datetime="2025-04-07T04:12:13.000Z" title="发表于 2025-04-07 12:12:13">2025-04-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/07/GriefDefender/" title="GriefDefender | 支持混合端且功能丰富强大的领地插件">GriefDefender | 支持混合端且功能丰富强大的领地插件</a><time datetime="2025-04-07T04:12:13.000Z" title="发表于 2025-04-07 12:12:13">2025-04-07</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="Mybbs —— 开源MC社区" target="_blank">Mybbs —— 开源MC社区</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">71</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">推荐网站</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com" title="Github"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://tse1-mm.cn.bing.net/th/id/OIP-C.NGIDdVP6vw9ue_D-mrEVFQHaHa?rs=1&amp;pid=ImgDetMainhttps://tse1-mm.cn.bing.net/th/id/OIP-C.NGIDdVP6vw9ue_D-mrEVFQHaHa?rs=1&amp;pid=ImgDetMain" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">暂无</div><div class="back-menu-list"><a class="back-menu-item" href="/%E9%83%BD%E8%AF%B4%E4%BA%86%E6%9A%82%E6%97%A0%E4%BA%86%EF%BC%81" title="暂无"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&risl=&pid=ImgRaw&r=0&quot;" data-lazy-src="https://ts1.cn.mm.bing.net/th/id/R-C.7b1a08b9cad671ec7cd3f40a937cf90c?rik=bscFCAJCax1ZJg&amp;riu=http%3a%2f%2fbpic.588ku.com%2felement_pic%2f19%2f03%2f29%2f32fd5b5d10ca51980988fedeb9ecd694.jpg&amp;ehk=EBfBi6AGEGxpmzZ4S6BvITM75dU67ZEekiA%2bh0bxbtc%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" alt="暂无"/><span class="back-menu-item-text">暂无</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 本站</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 首页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/4238948.html"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 帮助</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&amp;k=AVD1Y5VnrY8z603_1dFsQrHfY1Uodp1O&amp;authKey=bX2RSjVq%2BYvjD2fsZ3PpEz4r2UAeV0e4lMLr4gTi7agxGPNsEfOP2M%2F%2Bw7i1mryp&amp;noverify=0&amp;group_code=565126072"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 交流群</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 帖子</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 帖子</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 板块</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/index1.html"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 发帖子</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 更多</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/HTML/tc.html"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 图床</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.pixelbbs.cn/source/plugin/bphp_clouds/upload/4438/20240601/417cb596663d3d5bf57708af2fa16eba.zip"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 源码</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/30588.html"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 导航站</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/HTML/index2.html"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 服务器</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/gl.html"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 个人中心</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 小游戏</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/HTML/tcs.html"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 2048</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/HTML/tcc.html"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 贪吃蛇</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/CSDN/" style="font-size: 0.88rem;">CSDN<sup>1</sup></a><a href="/tags/MC/" style="font-size: 0.88rem;">MC<sup>36</sup></a><a href="/tags/Mod/" style="font-size: 0.88rem;">Mod<sup>1</sup></a><a href="/tags/blog/" style="font-size: 0.88rem;">blog<sup>1</sup></a><a href="/tags/github/" style="font-size: 0.88rem;">github<sup>29</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>4</sup></a><a href="/tags/hexo%E4%B8%BB%E9%A2%98/" style="font-size: 0.88rem;">hexo主题<sup>9</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>1</sup></a><a href="/tags/paper/" style="font-size: 0.88rem;">paper<sup>1</sup></a><a href="/tags/%E4%BC%91%E9%97%B2/" style="font-size: 0.88rem;">休闲<sup>1</sup></a><a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 0.88rem;">分享<sup>5</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">工具<sup>4</sup></a><a href="/tags/%E6%89%98%E7%AE%A1/" style="font-size: 0.88rem;">托管<sup>1</sup></a><a href="/tags/%E6%8C%87%E4%BB%A4/" style="font-size: 0.88rem;">指令<sup>2</sup></a><a href="/tags/%E6%8E%A8%E8%8D%90/" style="font-size: 0.88rem;">推荐<sup>1</sup></a><a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size: 0.88rem;">插件<sup>11</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">教程<sup>20</sup></a><a href="/tags/%E6%95%B4%E5%90%88%E5%8C%85/" style="font-size: 0.88rem;">整合包<sup>4</sup></a><a href="/tags/%E6%96%B0%E9%97%BB/" style="font-size: 0.88rem;">新闻<sup>2</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 0.88rem;">服务器<sup>2</sup></a><a href="/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/" style="font-size: 0.88rem;">服务端<sup>1</sup></a><a href="/tags/%E7%B2%BE%E5%93%81/" style="font-size: 0.88rem;">精品<sup>3</sup></a><a href="/tags/%E8%8C%B6%E9%A6%86/" style="font-size: 0.88rem;">茶馆<sup>6</sup></a><a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 0.88rem;">视频<sup>1</sup></a><a href="/tags/%E8%BD%AC%E8%BD%BD/" style="font-size: 0.88rem;">转载<sup>11</sup></a><a href="/tags/%E9%97%AE%E7%AD%94/" style="font-size: 0.88rem;">问答<sup>5</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Mybbs —— 开源MC社区 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "2898734480@qq.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>